<!doctype html><html class="ifnojs addua addos"><head><meta charset="UTF-8" />
<title></title>
<script src="../uu.js"></script>
<script src="../uu.codec.js"></script>
<script src="../uu.codec.unicode.js"></script>
<script src="../uu.class.js"></script>
<script src="../uu.string.js"></script>
<script src="../uu.css.js"></script>
<script src="../uu.node.js"></script>
<script src="../uu.nodebuilder.js"></script>
<script src="../uu.query.js"></script>
<script src="../uu.url.js"></script>
<script src="../uu.img.js"></script>
<script src="../uu.test.js"></script>
</head><body>
<div id="div" title="title" style="display:none">text</div>
<script>
function xboot(uu) {
  uu.test({
    "uu.array()": "",
      "[1][through] uu.array([1,2]) は引数で与えられた [1,2] をそのまま返す(複製しない)": function() {
        var ary1 = [1, 2];
        var ref1 = ary1;

        return [uu.array(ary1), "===", ref1];
      },
      "[2][to ary] uu.array(12) は [12] を返す": function() {
        return [uu.array(12), "==", [12]];
      },
      "[2][to ary] uu.array('12') は ['12'] を返す": function() {
        return [uu.array('12'), "==", ['12']];
      },
      "[3][convert NodeList] uu.array(document.getElementsByTagName('HTML')) は NodeList を配列に変換できる。その結果は uu.query('html') と等しい": function() {
        return [uu.array(document.getElementsByTagName('HTML')), "==", uu.query('html')];
      },
      "[3][convert NodeList] uu.array(document.getElementsByTagName('HTML')) は NodeList を配列に変換できる。その結果は [document.html] と等しい": function() {
        return [uu.array(document.getElementsByTagName('HTML')), "==", [document.html]];
      },
      "[4][convert arguments] uu.array(arguments) は 引数(1, 2, 3)を配列( [1, 2, 3] )に変換できる": function() {
        function uuarytest1() {
          return uu.array(arguments);
        }
        var rv = uuarytest1(1, 2, 3);
        return [rv, "==", [1, 2, 3]];
      },
    "uu.array.has()": "",
      "[1][has array] uu.array.has([1, 2, 3], 1) は true": function() {
        return [uu.array.has([1, 2, 3], 1), "is true"];
      },
      "[1][has array] uu.array.has([1, 2, 3], '1') は false": function() {
        return [uu.array.has([1, 2, 3], '1'), "is false"];
      },
      "[1][has array] uu.array.has(['1', 2, 3], '1') は true": function() {
        return [uu.array.has(['1', 2, 3], '1'), "is true"];
      },
      "[1][has array] uu.array.has(['1', , 2, 3], 2) は true (粗い配列でもとりあえずOK)": function() {
        return [uu.array.has(['1', , 2, 3], 2), "is true"];
      },
      "[1][has array] uu.array.has(['1', , 2, 3], undefined) は false (undefined は検索できない)": function() {
        return [uu.array.has(['1', , 2, 3], undefined), "is false"];
      },
      "[1][has array] uu.array.has(['1', undefined, 2, 3], undefined) は false (undefined は検索できない)": function() {
        return [uu.array.has(['1', undefined, 2, 3], undefined), "is false"];
      },
      "[1][has array] uu.array.has([1, 2, 3], [1, 2]) は true": function() {
        return [uu.array.has([1, 2, 3], [1, 2]), "is true"];
      },
      "[2][has node] uu.array.has([document, document.body], document.body) は true": function() {
        return [uu.array.has([document, document.body], document.body), "is true"];
      },
      "[3][has node] uu.array.has([document, document.body, document.getElementsByTagName('head')[0]], [document, document.body]) は true": function() {
        return [uu.array.has([document, document.body, document.getElementsByTagName('head')[0]], [document, document.body]), "is true"];
      },

    "uu.array.sort()": "",
      "[1][num 0-9] uu.array.sort([11, 222, 4], '0-9') は 数字順(0→9)([4, 11, 222])にソートされる": function() {
        return [uu.array.sort([4, 11, 222], "0-9"), "==", [4, 11, 222]];
      },
      "[2][num 9-0] uu.array.sort([11, 222, 4], '9-0') は 数字順(9→0)([222, 11, 4])にソートされる": function() {
        return [uu.array.sort([4, 11, 222], "9-0"), "==", [222, 11, 4]];
      },
      "[3][ascii a-z] uu.array.sort(['z', 'a', 'b', 'c'], 'A-Z') は 英字順(A→Z)(['a', 'b', 'c', 'z'])にソートされる": function() {
        return [uu.array.sort(['z', 'a', 'b', 'c'], "A-Z"), "==", ['a', 'b', 'c', 'z']];
      },
      "[4][ascii a-z] uu.array.sort(['z', 'a', 'b', 'c'], 'Z-A') は 英字順(Z→A)(['z', 'c', 'b', 'a'])にソートされる": function() {
        return [uu.array.sort(['z', 'a', 'b', 'c'], "Z-A"), "==", ['z', 'c', 'b', 'a']];
      },
      "[5][user func] uu.array.clean([,,1,2,,]) は [1, 2]": function() {
        return [uu.array.clean([,,1,2,,]), "is", [1, 2]];
      },
    "uu.array.clean()": "",
      "uu.array.clean(var ary=[1,2,3]; delete ary[1]) == [1,3]。uu.array.clean は 欠落(delete)した要素や null をスキップする": function() {
        var ary = [1, 2, 3];
        delete ary[1];
        return [uu.array.clean(ary), "==", [1, 3]];
      },
      "uu.array.clean(var ary=[1,2,,null,3]; delete ary[1]) == [1,3]。uu.array.clean は 欠落(delete)した要素や null をスキップする": function() {
        var ary = [1,2,,null,3];
        delete ary[1];
        return [uu.array.clean(ary), "==", [1, 3]];
      },

      "uu.array.clean([,,1,2,,]) == [1, 2]": function() {
        return [uu.array.clean([,,1,2,,]), "==", [1, 2]];
      },
      "uu.array.clean([,null,1,2,,]) == [1, 2]": function() {
        return [uu.array.clean([,null,1,2,,]), "==", [1, 2]];
      },
      "uu.array.clean([null]) == []": function() {
        return [uu.array.clean([null]), "==", []];
      },
      "uu.array.clean([void 0]) == []": function() {
        return [uu.array.clean([void 0]), "==", []];
      },
      "uu.array.clean([]) == []": function() {
        return [uu.array.clean([]), "==", []];
      },
    "uu.array.unique()": "",
      "[1][unique elements] uu.array.unique([<body>, <head>, <body>]) は [<body>, <head>]": function() {
        var body = document.body,
            head = document.head;
        return [uu.array.unique([body, head, body]), "==", [body, head]];
      },
      "[1][unique elements] uu.array.unique([0, 1, 2, 3, 3, 2, 1, 0]) は [0, 1, 2, 3]": function() {
        return [uu.array.unique([0, 1, 2, 3, 3, 2, 1, 0]), "==", [0, 1, 2, 3]];
      },
      "[2][unique literals] uu.array.unique([0, 1, 2, 3, 3, 2, 1, 0], 1) は [0, 1, 2, 3]": function() {
        return [uu.array.unique([0, 1, 2, 3, 3, 2, 1, 0], 1), "==", [0, 1, 2, 3]];
      },
      "uu.array.unique(var ary=[1,2,,null,3,3,2,1,0]; delete ary[1]) は [1, 3, 2, 0]。\nuu.array.unique は 欠落(delete)した要素や null をスキップする": function() {
        var ary = [1,2,,null,3,3,2,1,0];
        delete ary[1];

        return [uu.array.unique(ary), "==", [1, 3, 2, 0]];
      },


/*
    "uu.array.indexOf()": "",
      "uu.array.indexOf([1,2,3], 1) は 0 を返す": function() {
        return [uu.array.indexOf([1,2,3], 1), "is", 0];
      },
      "uu.array.indexOf([<body>, <head>], <head>) は 1 を返す": function() {
        return [uu.array.indexOf([document.body, document.head], document.head), "is", 1];
      },
      "uu.array.indexOf([<body>, <head>], <html>) は -1 (not found) を返す": function() {
        return [uu.array.indexOf([document.body, document.head], document.html), "is", -1];
      },
 */
    "Array.filter()": "",
      "Array.filter([12, 5, 8, 130, 44], function(v) { return v >= 10; }) は [12, 130, 44] を返す": function() {
        return [[12, 5, 8, 130, 44].filter(function(v) { return v >= 10; }), "is", [12, 130, 44]];
      },
    "Array.every()": "",
      "Array.every([12, 5, 8, 130, 44], function(v) { return v >= 10; }) は false を返す": function() {
        return [[12, 5, 8, 130, 44].every(function(v) { return v >= 10; }), "is false"];
      },
      "Array.every([12, 54, 18, 130, 44], function(v) { return v >= 10; }) は true を返す": function() {
        return [[12, 54, 18, 130, 44].every(function(v) { return v >= 10; }), "is true"];
      },
    "Array.some()": "",
      "Array.some([12, 5, 8, 130, 44], function(v) { return v < 10; }) は true を返す": function() {
        return [[12, 5, 8, 130, 44].some(function(v) { return v < 10; }), "is true"];
      },
      "Array.some([12, 54, 18, 130, 44], function(v) { return v < 10; }) は false を返す": function() {
        return [[12, 54, 18, 130, 44].some(function(v) { return v < 10; }), "is false"];
      },
    "Array.map()": "",
      "Array.map([1, 2, 3, 4, 5], function(v) { return v * 2; }) は [2, 4, 6, 8, 10] を返す": function() {
        return [[1, 2, 3, 4, 5].map(function(v) { return v * 2; }), "is", [2, 4, 6, 8, 10]];
      },
    "uu.attr()": "",
      "[1][get all attrs] uu.attr.getAll(uu.id('div')) は Hash を返す(結果はブラウザ依存)": function() {
        return [uu.attr.getAll(uu.id('div')), "is hash"];
      },
      "[2][get all attrs(without style, uu*)] uu.attr.getAll(uu.id('div'), 1) は { id: 'div', title: 'title' } と等しい('uu'で始まる属性と、style属性は取得できない)": function() {
        return [uu.attr.getAll(uu.id('div'), 1), "==", { id: 'div', title: 'title' }];
      },
      "[3][get one attr] uu.attr(uu.id('div'), 'id') は 'div' } と等しい": function() {
        return [uu.attr(uu.id('div'), 'id'), "==", 'div'];
      },
      "[4][get some attrs] uu.attr(uu.id('div'), 'id,title') は { id: 'div', title: 'title' } と等しい": function() {
        return [uu.attr(uu.id('div'), 'id,title'), "==", { id: 'div', title: 'title' }];
      },
      "[5][set one attr] uu.attr(uu.id('div'), 'title', 'hoge') は node を返し、title は hoge に設定される": function() {
        var node = uu.id('div');
        if (uu.attr(node, 'title', 'hoge') !== node) {
          return [uu.attr(node, 'title', 'hoge'), "is fail"];
        }
        return [uu.attr(node, 'title'), "==", 'hoge'];
      },
      "[6][set some attrs] uu.attr(uu.id('div'), { 'class': 'A1', title: 'title' }) は node を返し、className は A1 に、 title は title に設定される": function() {
        var node = uu.id('div');
        if (uu.attr(node, { 'class': 'A1', title: 'title' }) !== node) {
          return [uu.attr(node, { 'class': 'A1', title: 'title' }), "is fail"];
        }
        return [uu.attr(node, 'title'), "==", 'title'];
      },

    "uu.attr.get()": "",
      "[3][get one attr] uu.attr.get(uu.id('div'), 'id') は 'div' } と等しい": function() {
        return [uu.attr.get(uu.id('div'), 'id'), "==", 'div'];
      },
      "[4][get some attrs] uu.attr.get(uu.id('div'), 'id,title') は { id: 'div', title: 'title' } と等しい": function() {
        return [uu.attr.get(uu.id('div'), 'id,title'), "==", { id: 'div', title: 'title' }];
      },
      "uu.attr.get('href,.,title,dot')": function() {
        var e;
        document.body.appendChild(e = uu.a("href,.,title,dot", "#link"));
        var v = uu.attr.get(e, "href");
        return [v, "is", "."];
      },
      "URLを含んでいても、uu.attr.get('href,http://example.com/,title,long') は問題なし": function() {
        var e;
        document.body.appendChild(e = uu.a("href,http://example.com/,title,long", "#link"));
        var v = uu.attr.get(e, "href");
        return [v, "is string"];
      },

    "uu.attr.set()": "",
      "[1][set some attrs] uu.attr.set(uu.id('div'), { title: 'unittest' }) で設定された値と uu.attr.get(uu.id('div'), 'title') の結果は等しい": function() {
        uu.attr.set(uu.id('div'), { title: 'unittest' });
        var rv = uu.attr.get(uu.id('div'), 'title');
        return ["unittest", "==", rv];
      },
    "uu.Class()": "",
      "uu.Class は複数回生成すると別々のインスタンスを返す": function() {
        uu.Class("UNITTEST1");

        var obj1 = uu("UNITTEST1");
        var obj2 = uu("UNITTEST1");

        return [obj1, "!=", obj2];
      },
    "uu.Class.singleton()": "",
      "uu.Class.singleton は複数回生成しても同じインスタンスを返す": function() {
        uu.Class.singleton("UNITTEST2");
        var obj1 = uu("UNITTEST2");
        var obj2 = uu("UNITTEST2");

        return [obj1, "==", obj2];
      },
    "uu.Class.guid()": "",
      "uu.Class.guid はユニークな ID を返す": function() {
        uu.Class("UNITTEST3");

        var obj1 = uu("UNITTEST3");
        var obj2 = uu("UNITTEST3");

        return [uu.Class.guid(obj1), "<", uu.Class.guid(obj2)];
      },
      "singleton クラスなら uu.Class.guid は同じ ID を返す": function() {
        uu.Class.singleton("UNITTEST4");
        var obj1 = uu("UNITTEST4");
        var obj2 = uu("UNITTEST4");

        return [uu.Class.guid(obj1), "==", uu.Class.guid(obj2)];
      },
    "uu(new Class)": "",
      "[1][create instance] uu('UNITTEST1', 1, 2) は new uu.Class('UNITTEST1', 1, 2) の結果(インスタンス)を返す": function() {
        uu.Class("UNITTEST1"); // define
        var obj1 = uu("UNITTEST1");

        return [obj1, "is instance"];
      },

    "uu.klass.has()": "",
      "uu.klass.has(uu.id('div')) ( 'A1 A2 A3') は 'A1 A3' を含んでいる": function() {
        uu.id('div').className = "";
        uu.klass.add(uu.id('div'), "A1 A2 A3");

        return [uu.klass.has(uu.id('div'), "A1 A3"), "is true"];
      },
      "uu.klass.has(uu.id('div')) ( '') は '' を含んでいない": function() {
        uu.id('div').className = "";
        uu.klass.add(uu.id('div'), "");

        return [uu.klass.has(uu.id('div'), ""), "is false"];
      },
      "uu.klass.has(uu.id('div')) ( 'A1 A2 A3') は ' A2 ' を含んでいる": function() {
        uu.id('div').className = "";
        uu.klass.add(uu.id('div'), "A1 A2 A3");

        return [uu.klass.has(uu.id('div'), " A2 "), "is true"];
      },
      "uu.klass.has(uu.id('div')) ( 'あ い う') は ' い ' を含んでいる": function() {
        uu.id('div').className = "";
        uu.klass.add(uu.id('div'), "あ い う");

        return [uu.klass.has(uu.id('div'), " い "), "is true"];
      },
      "uu.klass.has(uu.id('div')) ( 'うい') は 'い' を含んでいない": function() {
        uu.id('div').className = "";
        uu.klass.add(uu.id('div'), "うい");

        return [uu.klass.has(uu.id('div'), "い"), "is false"];
      },


    "uu.klass.add()": "",
/*
      "uu.klass.add(uu.id('div')) ( 'A1 A2 A3' ) に 'A4　　　A1　' を足すと 'A1 A2 A3 A4 A1' になる": function() {
        uu.id('div').className = "";
        uu.klass.add(uu.id('div'), "A1 A2 A3");
        uu.klass.add(uu.id('div'), "A4   A1 ");

        return [uu.id('div').className, "==", 'A1 A2 A3 A4 A1'];
      },
 */
      "uu.klass.add(uu.id('div')) ( ' A1 A2 A3' ) に 'A4 A1' を足すと ' A1 A2 A3 A4 A1' になる": function() {
        uu.id('div').className = "";
        uu.klass.add(uu.id('div'), "A1 A2 A3");
        uu.klass.add(uu.id('div'), "A4 A1");

        return [uu.id('div').className, "==", ' A1 A2 A3 A4 A1'];
      },

    "uu.klass.sub()": "",
      "uu.klass.sub(uu.id('div')) ( 'A1 A2 A3 A4 A1' )から( 'A1　　A4' )を引くと 'A2 A3' になる": function() {
        uu.id('div').className = "A1 A2 A3 A4 A1";
        uu.klass.sub(uu.id('div'), "A1  A4");

        return [uu.id('div').className, "==", 'A2 A3'];
      },
      "uu.klass.sub(uu.id('div')) ( 'B1 B2' )から 存在しないクラス( 'A1 A2 A3 A4 A1' )を引いてもエラーにならない": function() {
        uu.id('div').className = "B1 B2";
        uu.klass.sub(uu.id('div'), "A1 A2 A3 A4 A1");

        return [uu.id('div').className, "==", 'B1 B2'];
      },
    "uu.klass.toggle()": "",
      "uu.klass.toggle(uu.id('div')) ( 'A1 A2 B1 B2' ) から 'A2 B2' をトグルすると、'A1 B1' になる": function() {
        uu.id('div').className = "A1 A2 B1 B2";
        uu.klass.toggle(uu.id('div'), "A2 B2");

        return [uu.id('div').className, "==", 'A1 B1'];
      },
      "uu.klass.toggle(uu.id('div')) ( 'A1 B1' ) から 'A2 B2' をトグルすると、'A1 B1 A2 B2' になる": function() {
        uu.id('div').className = "A1 B1";
        uu.klass.toggle(uu.id('div'), "A2 B2");

        return [uu.id('div').className, "==", 'A1 B1 A2 B2'];
      },

// -----------------------
    "Event": "",

// -----------------------
    "uu.hash()": "",
      "[1][through] uu.hash({ key: 'value' }) はハッシュをそのままスルーし { key: 'value' } を返す": function() {
        var hash1 = { key: 'value' };
        var hash2 = uu.hash(hash1);

        return [hash2, "===", hash1];
      },
      "[2][to hash] uu.hash('key', 123) == { key: 123 }": function() {
        var hash = uu.hash('key', 123);

        return [hash, "==", { key: 123 }];
      },

/*
    "uu.hash.num()": "",
      "uu.hash.num('key,0,key2,1') == { key: 0, key2: 1 }": function() {
        var hash = uu.hash.num('key,0,key2,1');

        return [hash, "==", { key: 0, key2: 1 }];
      },
 */

    "uu.hash.has()": "",
      "uu.hash.has({ a: 1, b: 2, c: 3 }, { a: 1, b: 2 }) == true": function() {
        return [uu.hash.has({ a: 1, b: 2, c: 3 }, { a: 1, b: 2 }), "is true"];
      },
      "uu.hash.has({ a: 1, b: 2, c: 3 }, { a: '1', b: 2 }) == false": function() {
        return [uu.hash.has({ a: 1, b: 2, c: 3 }, { a: '1', b: 2 }), "is false"];
      },
      "uu.hash.has({ a: function() { return 'a'}, b: 2, c: 3 }, { a: function() { return 'a'}, b: 2 }) == true": function() {
        return [uu.hash.has({ a: function() { return 'a'}, b: 2, c: 3 }, { a: function() { return 'a'}, b: 2 }), "is true"];
      },
      "uu.hash.has({ a: function() { return 'b'}, b: 2, c: 3 }, { a: function() { return 'a'}, b: 2 }) == false": function() {
        return [uu.hash.has({ a: function() { return 'b'}, b: 2, c: 3 }, { a: function() { return 'a'}, b: 2 }), "is false"];
      },
    "uu.hash.size()": "",
      "ハッシュサイズは2": function() {
        return [uu.hash.size({ aaa: 1, bbb: 2 }), "==", 2];
      },
    "uu.keys()": "",
      "{ key: 1, key2: 2 } から key の配列[key, key2]を生成する": function() {
        return [uu.keys({ key: 1, key2: 2 }), "==", ["key", "key2"]];
      },
    "uu.values()": "",
      "{ key: 1, key2: 2 } から値の配列[1,2]を生成する": function() {
        return [uu.values({ key: 1, key2: 2 }), "==", [1, 2]];
      },
    "uu.hash.indexOf()": "",
      "uu.hash.indexOf({ a: 1, b: 2, c: 2 }, 2) == 'b'": function() {
        return [uu.hash.indexOf({ a: 1, b: 2, c: 2 }, 2), "==", 'b'];
      },
    "uu.array.toHash()": "",
      "['key', 'key2'] と ['1', '2'] から { key: '1', key2: '2' } を生成する": function() {
        return [uu.array.toHash(['key', 'key2'], ['1', '2']), "==", { key: '1', key2: '2' }];
      },
      "['key', 'key2'] と ['1', '2'] から { key: 1, key2: 2 } を生成する(value を数値化)": function() {
        return [uu.array.toHash(['key', 'key2'], ['1', '2'], 1), "==", { key: 1, key2: 2 }];
      },
      "['key', 'key2'] と '1' から { key: '1', key2: '1' } を生成する": function() {
        return [uu.array.toHash(['key', 'key2'], '1'), "==", { key: '1', key2: '1' }];
      },
      "['key', 'key2'] と '1' から { key: 1, key2: 1 } を生成する(value を数値化)": function() {
        return [uu.array.toHash(['key', 'key2'], '1', 1), "==", { key: 1, key2: 1 }];
      },
/*
    "uu.hash.hasValue()": "",
      "uu.hash.hasValue({ a: 1, b: 2 }, 2) == true": function() {
        return [uu.hash.hasValue({ a: 1, b: 2 }, 2), "is true"];
      },

    "uu.img.load()": "",
      "uu.img.load('../img/cover01.jpg')": function() {
        return [uu.img.load('../img/cover01.jpg'), "is true"];
      },
 */


// -----------------------
    "MessagePump": "",
      "MSGBOXTEST1 と MSGBOXTEST2 にユニキャストすると [1] と [2] が帰ってくる": function() {
        uu.Class("MSGBOXTEST1", {
          msgbox: function(msg, param) {
  //          uu.puff("got msg: %s %s", msg, param);
            return 1;
          }
        });
        uu.Class("MSGBOXTEST2", {
          msgbox: function(msg, param) {
  //          uu.puff("got msg: %s %s", msg, param);
            return 2;
          }
        });
        var obj1 = uu("MSGBOXTEST1");
        var obj2 = uu("MSGBOXTEST2");

        var rv1 = uu.msg.send(obj1, "obj1 == obj2", "p1");
        var rv2 = uu.msg.send(obj2, "obj2 == obj1", "p1");

        return [rv1[0] === 1, "&&", rv2[0] === 2];
      },
// -----------------------
    "uu.node.add()": "",
      "uu.node.add('<div id=\"ctx\">...</div>') is node": function() {
        var fg = '\
<div id="ctx">\
  <div id="first">first</div>\
  <div id="prev">prev</div>\
  <div id="tgt">tgt\
    <div id="firstChild">firstChild</div>\
    <div><div id="onlyChild"></div></div>\
    <div id="lastChild">lastChild</div>\
  </div>\
  <div id="next">next</div>\
  <div id="last">last</div>\
</div>';
        return [uu.node.add(fg), "is node"];
      },
    "uu.nore.has()": "",
      "uu.node.has(uu.id('tgt'), uu.id('ctx')) == true": function() {
        return [uu.node.has(uu.id('tgt'), uu.id('ctx')), "is true"];
      },
      "uu.node.has(uu.id('ctx'), uu.id('ctx')) == false": function() {
        return [uu.node.has(uu.id('ctx'), uu.id('ctx')), "is false"];
      },
      "uu.node.has(document.body, uu.id('ctx')) == false": function() {
        return [uu.node.has(document.body, uu.id('ctx')), "is false"];
      },


    "uu.nore.find.first()": "",
      "uu.node.find.first(uu.id('tgt')) == uu.id('first')": function() {
        return [uu.node.find.first(uu.id('tgt')), "==", uu.id('first')];
      },
    "uu.nore.find.prev()": "",
      "uu.node.find.prev(uu.id('tgt')) == uu.id('prev')": function() {
        return [uu.node.find.prev(uu.id('tgt')), "==", uu.id('prev')];
      },
    "uu.nore.find.next()": "",
      "uu.node.find.next(uu.id('tgt')) == uu.id('next')": function() {
        return [uu.node.find.next(uu.id('tgt')), "==", uu.id('next')];
      },
    "uu.nore.find.last()": "",
      "uu.node.find.last(uu.id('tgt')) == uu.id('last')": function() {
        return [uu.node.find.last(uu.id('tgt')), "==", uu.id('last')];
      },
    "uu.nore.find.firstChild()": "",
      "uu.node.find.firstChild(uu.id('tgt')) == uu.id('firstChild')": function() {
        return [uu.node.find.firstChild(uu.id('tgt')), "==", uu.id('firstChild')];
      },
    "uu.nore.find.lastChild()": "",
      "uu.node.find.lastChild(uu.id('tgt')) == uu.id('lastChild')": function() {
        return [uu.node.find.lastChild(uu.id('tgt')), "==", uu.id('lastChild')];
      },

    "uu.nore.first()": "",
      "uu.node.first(uu.p(':hoge'), uu.id('tgt'))": function() {
        return [uu.node.first(uu.p(':hoge'), uu.id('tgt')), "is node"];
      },
    "uu.nore.prev()": "",
      "uu.node.prev(uu.p(':hoge'), uu.id('tgt'))": function() {
        return [uu.node.prev(uu.p(':hoge'), uu.id('tgt')), "is node"];
      },
    "uu.nore.next()": "",
      "uu.node.next(uu.p(':hoge'), uu.id('tgt'))": function() {
        return [uu.node.next(uu.p(':hoge'), uu.id('tgt')), "is node"];
      },
    "uu.nore.last()": "",
      "uu.node.last(uu.p(':hoge'), uu.id('tgt'))": function() {
        return [uu.node.last(uu.p(':hoge'), uu.id('tgt')), "is node"];
      },
    "uu.nore.firstChild()": "",
      "uu.node.firstChild(uu.p(':hoge'), uu.id('tgt'))": function() {
        return [uu.node.firstChild(uu.p(':hoge'), uu.id('tgt')), "is node"];
      },
    "uu.nore.lastChild()": "",
      "uu.node.lastChild(uu.p(':hoge'), uu.id('tgt'))": function() {
        return [uu.node.lastChild(uu.p(':hoge'), uu.id('tgt')), "is node"];
      },

    "uu.node.next() + onlyChild + insertAfter": "",
      "uu.node.next(uu.p(':only'), uu.id('onlyChild'))": function() {
        return [uu.node.next(uu.p(':only'), uu.id('onlyChild')), "is node"];
      },


    "uu.nore.remove()": "",
      "uu.node.remove(uu.id('ctx'))": function() {
        return [uu.node.remove(uu.id('ctx')), "is node"];
      },
    "uu.node.data()": "",
      "[1][get all] uu.node.data(uu.id('div')) で divノードに格納したデータが取り出せる(何も設定されていないので、空の Hash が返る)": function() {
        var rv = uu.node.data(uu.id('div'));

        return [rv, "==", {}];
      },
      "[2][get one] uu.node.data(uu.id('div'), 'key', 'value') で div に設定されたデータが取り出せる": function() {
        uu.node.data(uu.id('div'), 'key', 'value');
        var rv = uu.node.data(uu.id('div'), 'key');

        return [rv, "==", 'value'];
      },
      "[3][set] uu.node.data(uu.id('div'), 'key', null) で div に設定されているデータを null で上書できる": function() {
        uu.node.data(uu.id('div'), 'key', 'value'); // [3][add]
        uu.node.data(uu.id('div'), 'key', null); // [3][add]
        var rv = uu.node.data(uu.id('div'), 'key'); // [2][get]

        return [rv, "is null"];
      },
    "uu.node.data.clear()": "",
      "[1][clear data] uu.node.data.clear(uu.id('div'), 'key') で key に関連するデータを消せる": function() {
        uu.node.data.clear(uu.id('div'), 'key');

        var rv = uu.node.data.get(uu.id('div'), 'key');

        return [rv, "is undefined"];
      },
      "[1][clear data] uu.node.data.clear(uu.id('div'), 'key') で key に関連するデータを消せる(value = { hoge: 1, huga: 2 })": function() {
        uu.node.data.set(uu.id('div'), 'key', { hoge: 1, huga: 2 });
        uu.node.data.clear(uu.id('div'), 'key');

        var rv = uu.node.data.get(uu.id('div'), 'key');

        return [rv, "is undefined"];
      },
      "[1][clear data] uu.node.data.clear(uu.id('div'), 'key') で key に関連するデータを消せる(value = undefined)": function() {
        uu.node.data.clear(uu.id('div'), 'key');

        var rv = uu.node.data.get(uu.id('div'), 'key');

        return [rv, "is undefined"];
      },

      "[2][clear all data] uu.node.data.clear(uu.id('div'), 'key') で key に関連するデータを消せる": function() {
        uu.node.data.set(uu.id('div'), 'key', { hoge: 1, huga: 2 });
        uu.node.data.clear(uu.id('div'));

        var rv = uu.node.data.get(uu.id('div'), 'key');

        return [rv, "is undefined"];
      },

// -----------------------
    "uu.fix()": "",
      'uu.fix("-webkit-shadow") == "-webkit-shadow"': function() {
        return [uu.fix("-webkit-shadow"), "==", "-webkit-shadow"];
      },
      'uu.fix("-webkit-box-shadow") == "WebkitBoxShadow"': function() {
        return uu.webkit ? [uu.fix("-webkit-box-shadow"), "==", "WebkitBoxShadow"]
                         : ["WebKit ONLY", "==", "WebKit ONLY"];

      },
      'uu.fix("-moz-appearance") == "MozAppearance"': function() {
        return uu.gecko ? [uu.fix("-moz-appearance"), "==", "MozAppearance"]
                        : ["Gecko ONLY", "==", "Gecko ONLY"];
      },
      'uu.fix("-ms-block-progression") == "msBlockProgression"': function() {
        return uu.ie ? [uu.fix("-ms-block-progression"), "==", "msBlockProgression"]
                     : ["IE ONLY", "==", "IE ONLY"];
      },
      'uu.fix("-o-transition-property") == "OTransitionProperty"': function() {
        return uu.opera ? [uu.fix("-o-transition-property"), "==", "OTransitionProperty"]
                        : ["OPERA ONLY", "==", "OPERA ONLY"];
      },

      'uu.fix("background-color") == "backgroundColor"': function() {
        return [uu.fix("background-color"), "==", "backgroundColor"];
      },
      'uu.fix("float") == "cssFloat" or "styleFloat"': function() {
        return [uu.fix("float"), "==", uu.ie ? "styleFloat" : "cssFloat"];
      },
      'uu.fix("for") == "htmlFor"': function() {
        return [uu.fix("for"), "==", "htmlFor"];
      },
      'uu.fix("o") == "opacity"': function() {
        return [uu.fix("o"), "==", "opacity"];
      },
      'uu.fix("bg") == "background"': function() {
        return [uu.fix("bg"), "==", "background"];
      },
      'uu.fix("bgimg") == "backgroundImage"': function() {
        return [uu.fix("bgimg"), "==", "backgroundImage"];
      },

    "uu.trim()": "",
      "uu.trim('nospace') == 'nospace'": function() {
        return [uu.trim('nospace'), "==", 'nospace'];
      },
      "uu.trim('has space') == 'has space'": function() {
        return [uu.trim('has space'), "==", 'has space'];
      },
      "uu.trim('  has  space  ') == 'has  space'": function() {
        return [uu.trim('  has  space  '), "==", 'has  space'];
      },
      "uu.trim('') == ''": function() {
        return [uu.trim(''), "==", ''];
      },
    "uu.trim.tag()": "",
      'uu.trim.tag(" <h1>A</h1>  B  <p>C</p> ") == "A B C"': function() {
        return [uu.trim.tag(" <h1>A</h1>  B  <p>C</p> "), "==", "A B C"];
      },
      'uu.trim.tag("A B C</p> ") == "A B C"': function() {
        return [uu.trim.tag("A B C</p> "), "==", "A B C"];
      },
      'uu.trim.tag("<div>A B C</p> ") == "A B C"': function() {
        return [uu.trim.tag("<div>A B C</p> "), "==", "A B C"];
      },
      'uu.trim.tag("<div><p>A</p></div> B<p>  C</p> ") == "A B C"': function() {
        return [uu.trim.tag("<div><p>A</p></div> B<p>  C</p> "), "==", "A B C"];
      },
    "uu.trim.url()": "",
      "uu.trim.url('url(\"http://...\")') == \"http://...\"": function() {
        return [uu.trim.url('url("http://...")'), "==", "http://..."];
      },
      "uu.trim.url(\"url('http://...')\") == \"http://...\"": function() {
        return [uu.trim.url("url('http://...')"), "==", "http://..."];
      },
      "uu.trim.url('http://...') == \"http://...\"": function() {
        return [uu.trim.url('http://...'), "==", "http://..."];
      },
    "uu.trim.inner()": "",
      "uu.trim.inner('  diet  inner  space  ') == 'diet inner space'": function() {
        return [uu.trim.inner('  diet  inner  space  '), "==", 'diet inner space'];
      },
    "uu.trim.quote()": "",
      "uu.trim.quote(\" 'has  space' \") == \"has  space\"": function() {
        return [uu.trim.quote(" 'has  space' "), "==", "has  space"];
      },
      'uu.trim.quote(\' "has  space" \') == "has  space"': function() {
        return [uu.trim.quote(' "has  space" '), "==", "has  space"];
      },
    "uu.trim.bracket()": "",
      "uu.trim.bracket('  div  ') == 'div'": function() {
        return [uu.trim.bracket('  div  '), "==", 'div'];
      },
      "uu.trim.bracket('  <div>  ') == 'div'": function() {
        return [uu.trim.bracket('  <div>  '), "==", 'div'];
      },
      "uu.trim.bracket('  [bracket]  ') == 'div'": function() {
        return [uu.trim.bracket('  [bracket]  '), "==", 'bracket'];
      },
      "uu.trim.bracket('  (bracket)  ') == 'div'": function() {
        return [uu.trim.bracket('  (bracket)  '), "==", 'bracket'];
      },
      "uu.trim.bracket('  {bracket}  ') == 'div'": function() {
        return [uu.trim.bracket('  {bracket}  '), "==", 'bracket'];
      },
    "uu.split()": "",
      "uu.split(' A  B  C ') == ['A', 'B', 'C'] スペース区切りでトークンを切り出す(左右のスペースをトリムするので、IEの String.split() バグを無視できる)": function() {
        return [uu.split(' A  B  C '), "==", ['A', 'B', 'C']];
      },
    "uu.split.comma()": "",
      "uu.split.comma(' A,B,C ') == ['A', 'B', 'C'] カンマ区切りでトークンを切り出す(左右のスペースをトリムする)": function() {
        return [uu.split.comma(' A,B,C '), "==", ['A', 'B', 'C']];
      },
      "uu.split.comma(',,, ,,A,,,B,C,, ') == ['A', 'B', 'C'] カンマ区切りでトークンを切り出す(左右のスペースをトリムする)": function() {
        return [uu.split.comma(',,, ,,A,,,B,C,, '), "==", ['A', 'B', 'C']];
      },
    "uu.split.toHash()": "",
      "[3][split , str] uu.split.toHash('key,a,key2,b') == { key: 'a', key2: 'b' }": function() {
        var hash = uu.split.toHash('key,a,key2,b');

        return [hash, "==", { key: 'a', key2: 'b' }];
      },
      "[4][split ; str] uu.split.toHash('key;a;key2;b', ';', 0) == { key: 'a', key2: 'b' }": function() {
        var hash = uu.split.toHash('key;a;key2;b', ';', 0);

        return [hash, "==", { key: 'a', key2: 'b' }];
      },
      "[5][split , num] uu.split.toHash('key,0,key2,1', ',', 1) == { key: 0, key2: 1 }": function() {
        var hash = uu.split.toHash('key,0,key2,1', ',', 1);

        return [hash, "==", { key: 0, key2: 1 }];
      },

    "uu.split.token()": "",
      "uu.split.token('url( http:// ) rgba(0, 0, 0, 0) center center') == ['url( http:// )', 'rgba(0, 0, 0, 0)', 'center', 'center'] CSS のトークンを正しく切り出せる": function() {
        return [uu.split.token('url( http:// ) rgba(0, 0, 0, 0) center center'), "==", ['url( http:// )', 'rgba(0, 0, 0, 0)', 'center', 'center']];
      },
    "uu.codec.ucs2.encode()": "",
      "uu.codec.ucs2.encode('string', 0) == '\\u0073'": function() {
        return [uu.codec.ucs2.encode('string', 0), "==", '\\u0073'];
      },
      "uu.codec.ucs2.encode('string', 1) == '\\u0074'": function() {
        return [uu.codec.ucs2.encode('string', 1), "==", '\\u0074'];
      },
      "uu.codec.ucs2.encode('あいう', 1) == '\\u3044'": function() {
        return [uu.codec.ucs2.encode('あいう', 1), "==", '\\u3044'];
      },
      "uu.codec.ucs2.encode('string', -1) == '\\u0000'  第二引数に不正な値を指定すると、\\u0000 が返る": function() {
        return [uu.codec.ucs2.encode('string', -1), "==", '\\u0000'];
      },
      "uu.codec.ucs2.encode('string', 100) == '\\u0000'  第二引数に不正な値を指定すると、\\u0000 が返る": function() {
        return [uu.codec.ucs2.encode('string', 100), "==", '\\u0000'];
      },
    "uu.codec.ucs2.decode()": "",
      "uu.codec.ucs2.decode('\\u0073\\u0074\\u0072\\u0069\\u006e\\u0067', 0) == 'string'": function() {
        return [uu.codec.ucs2.decode('\\u0073\\u0074\\u0072\\u0069\\u006e\\u0067', 0), "==", 'string'];
      },
      "uu.codec.ucs2.decode('st\\u0073\\u0074\\u0072\\u0069\\u006e\\u0067', 0) == 'ststring'": function() {
        return [uu.codec.ucs2.decode('st\\u0073\\u0074\\u0072\\u0069\\u006e\\u0067', 0), "==", 'ststring'];
      },
      "uu.codec.ucs2.decode('\\u3043\\u3044\\u3045', 0) == 'ぃいぅ'": function() {
        return [uu.codec.ucs2.decode('\\u3043\\u3044\\u3045', 0), "==", 'ぃいぅ'];
      },
    "uu.codec.entity.encode()": "",
      "uu.codec.entity.encode('<a href=\"&\">') == '&lt;a href=&quot;&amp;&quot;&gt;'": function() {
        return [uu.codec.entity.encode('<a href="&">'), "==", '&lt;a href=&quot;&amp;&quot;&gt;'];
      },
    "uu.codec.entity.decode()": "",
      "uu.codec.entity.decode('&lt;a href=&quot;&amp;&quot;&gt;') == '<a href=\"&\">'": function() {
        return [uu.codec.entity.decode('&lt;a href=&quot;&amp;&quot;&gt;'), "==", '<a href="&">'];
      },
    "uu.date": "",
      "uu.date() は DateHash を返す": function() {
        var dateHash = uu.date();

        return [dateHash, "is hash"];
      },
      "uu.date().ISO() は現在時刻を ISO8601 形式で返す": function() {
        return [uu.date().ISO(), "is string"];
      },
      "uu.date().RFC() は現在時刻を RFC1123 形式で返す": function() {
        return [uu.date().RFC(), "is string"];
      },
      "uu.date().GMT() は現在時刻を GMT (RFC1123) 形式で返す": function() {
        return [uu.date().GMT(), "is string"];
      },

      "uu.date(uu.date(new Date).ISO()) で元に戻る": function() {
        var now = new Date;
        now.setMilliseconds(0); // ms を切り落として比較する

        var dateHash = uu.date(now);

        var isoString = dateHash.ISO();
        var rv = uu.date(isoString);

        return [dateHash.time, "==", rv.time];
      },
      "uu.date(uu.date(new Date).RFC()) で元に戻る": function() {
        var now = new Date;
        now.setMilliseconds(0); // ms を切り落として比較する

        var dateHash = uu.date(now);

        var isoString = dateHash.RFC();
        var rv = uu.date(isoString);

        return [dateHash.time, "==", rv.time];
      },

// -----------------------
    "Type": "",
      "null は null 型":        function() { return [null,    "is null"];     },
      "void 0 は undefined 型(is undefined)": function() { return [void 0,  "is undefined"];},
      "{} は hash 型(is hash)":  function() { return [{},      "is hash"];     },
      "[] は array 型(is array)":  function() { return [[],    "is array"];      },
      "[] は array 型(is array)":function() { return [[],      "is array"];    },
      "false は boolean 型(is boolean)":    function() { return [false,   "is boolean"];     },
      "true は boolean 型(is boolean)":     function() { return [true,    "is boolean"];  },
      "123 は number 型(is number)":       function() { return [123,     "is number"];   },
      "-123.4 は number 型(is number)":    function() { return [-123.4,  "is number"];   },
      "1 / 0 は number 型(is number)":     function() { return [1 / 0,   "is number"];   },
      "0 / 0 は number 型(is number)":     function() { return [0 / 0,   "is number"];   },
      "'' は string 型(is string)":        function() { return ['',      "is string"];   },
      "function(){} は function 型(is function)":
                                function() { return [function(){}, "is function"]; },
      "document.body は node 型":
                                function() { return [document.body, "is node"]; },
      "document.getElementsByTagName('body') は fake 型(is FakeArray)":
                                function() { return [document.getElementsByTagName('body'), "is FakeArray"]; },

      "new Date は date 型":    function() { return [new Date, "is date"]; },
      "uu.type(123, uu.type.STRING | uu.type.NUMBER) は boolean 型 の戻り値を返す":
                                function() { return [uu.type(123, uu.type.STRING | uu.type.NUMBER), "is boolean"]; },
      "new Boolean(false) は boolean 型":
                                function() { return [new Boolean(false), "is boolean"];   },
      "new Number(1) は number 型":
                                function() { return [new Number(''), "is number"];   },
      "new String('') は string 型":
                                function() { return [new String(''), "is string"];   },

    "Array.isArray()": "",
      // from V8 unit test
      // http://code.google.com/p/v8/source/browse/branches/bleeding_edge/test/mjsunit/third_party/array-isarray.js?spec=svn3060&r=3060
      "Array.isArray([]) is true": function() {
          return [Array.isArray([]), "is true"];
      },
      "Array.isArray(new Array) is true": function() {
          return [Array.isArray(new Array), "is true"];
      },
      "Array.isArray(Array()) is true": function() {
          return [Array.isArray(Array()), "is true"];
      },
      "Array.isArray('abc'.match(/(a)*/g)) is true": function() {
          return [Array.isArray('abc'.match(/(a)*/g)), "is true"];
      },
      "Array.isArray((function(){ return Array.isArray(arguments); })()) is false": function() {
          return [(function(){ return Array.isArray(arguments); })(), "is false"];
      },
      "Array.isArray() is false": function() {
          return [Array.isArray(), "is false"];
      },
      "Array.isArray(null) is false": function() {
          return [Array.isArray(null), "is false"];
      },
      "Array.isArray(undefined) is false": function() {
          return [Array.isArray(undefined), "is false"];
      },
      "Array.isArray(true) is false": function() {
          return [Array.isArray(true), "is false"];
      },
      "Array.isArray(false) is false": function() {
          return [Array.isArray(false), "is false"];
      },
      "Array.isArray('a string') is false": function() {
          return [Array.isArray('a string'), "is false"];
      },
      "Array.isArray({}) is false": function() {
          return [Array.isArray({}), "is false"];
      },
      "Array.isArray({length: 5}) is false": function() {
          return [Array.isArray({length: 5}), "is false"];
      },
      "Array.isArray({__proto__: Array.prototype, length:1, 0:1, 1:2}) is false": function() {
          return [Array.isArray({__proto__: Array.prototype, length:1, 0:1, 1:2}), "is false"];
      },
// -----------------------
    "uu.url()": "",
      "uu.url() は 絶対URLを返す": function() {
        return [uu.url(), "is string"];
      },
      "uu.url('http://example.com/dir/file.ext') は URL をパースする": function() {
        return [
          uu.url('http://example.com/dir/file.ext'), "==", {
            url:    "http://example.com/dir/file.ext",
            scheme: "http",
            domain: "example.com",
            port:   "",
            base:   "http://example.com/dir/",
            path:   "/dir/file.ext",
            dir:    "/dir/",
            file:   "file.ext",
            query:  "",
            hash:   {},
            fragment: ""
          }
        ];
      },
      "uu.url(uu.url('http://example.com/dir/file.ext')) は URL をパースしてリビルドする": function() {
        return [
          uu.url({
            url:    "http://example.com/dir/file.ext",
            scheme: "http",
            domain: "example.com",
            port:   "",
            base:   "http://example.com/dir/",
            path:   "/dir/file.ext",
            dir:    "/dir/",
            file:   "file.ext",
            query:  "",
            hash:   {},
            fragment: ""
          }),
          "==", 'http://example.com/dir/file.ext'
        ];
      },
      "uu.url('http://example.com:8080/dir/file.ext?key=val&key2=val2#frag') も パースできる": function() {
        return [
          uu.url('http://example.com:8080/dir/file.ext?key=val&key2=val2#frag'), "==", {
            url:    "http://example.com:8080/dir/file.ext?key=val;key2=val2#frag",
            scheme: "http",
            domain: "example.com",
            port:   "8080",
            base:   "http://example.com:8080/dir/",
            path:   "/dir/file.ext",
            dir:    "/dir/",
            file:   "file.ext",
            query:  "key=val;key2=val2",
            hash:   { key: "val", key2: "val2" },
            fragment: "frag"
          }
        ];
      },
    "uu.url.abs()": "",
      "uu.url.abs('../dir/file.ext') は 相対URL を絶対URLに変換する": function() {
        return [uu.url.abs('../dir/file.ext'), "is string"];
      },
    "uu.url.dir()": "",
      "uu.url.dir('../dir/file.ext') はディレクトリパスを取得する(file.ext を切り落とす)": function() {
        return [uu.url.dir('../dir/'), "is string"];
      },
    "uu.url.parse()": "",
      "uu.url.parse('../dir/file.ext') は, uu.url('../dir/file.ext') と同じ結果になる": function() {
        return [uu.url.parse('../dir/file.ext'), "==", uu.url('../dir/file.ext')];
      },
    "uu.url.build()": "",
      "uu.url.build(uu.url('../dir/file.ext')) は, uu.url(uu.url('../dir/file.ext')) と同じ結果になる": function() {
        return [uu.url.build(uu.url('../dir/file.ext')), "==", uu.url(uu.url('../dir/file.ext'))];
      },
    "uu.url.split()": "",
      "uu.url.split('http://example.com/dir/file.ext') は, ['http://example.com/dir/', 'file.ext'] と同じ結果になる": function() {
        return [uu.url.split('http://example.com/dir/file.ext'), "==", ['http://example.com/dir/', 'file.ext']];
      },

    "uu.qs()": "",
      "uu.qs('http://example.com:8080/dir/file.ext?key=val&key2=val2#frag') は URL から QueryString を取り出しパースする": function() {
        return [
          uu.qs('http://example.com:8080/dir/file.ext?key=val&key2=val2#frag'), "==", { key: "val", key2: "val2" },
        ];
      },
      "uu.qs('key=val&amp;key2=val2') を QueryString としてパースする": function() {
        return [
          uu.qs('key=val&amp;key2=val2'), "==", { key: "val", key2: "val2" },
        ];
      },
      "uu.qs('key=val&key2=val2') を QueryString としてパースする": function() {
        return [
          uu.qs('key=val&key2=val2'), "==", { key: "val", key2: "val2" },
        ];
      },
      "uu.qs('key=val;key2=val2') を QueryString としてパースする": function() {
        return [
          uu.qs('key=val;key2=val2'), "==", { key: "val", key2: "val2" },
        ];
      },

      "uu.qs('key=val&key2=val2#frag') はパースに失敗する": function() {
        return [
          uu.qs('key=val&key2=val2#frag'), "!=", { key: "val", key2: "val2" },
        ];
      },
      "uu.qs({ key: \"val\", key2: \"val2\" }) を QueryString としてビルドする": function() {
        return [
          uu.qs({ key: "val", key2: "val2" }), "==", 'key=val;key2=val2',
        ];
      },
    "uu.qs.amp()": "",
      "uu.qs.amp('key=val;key2=val2') は 'key=val&key2=val2' に変換される": function() {
        return [uu.qs.amp('key=val;key2=val2'), "==", 'key=val&key2=val2'];
      },
      "uu.qs.amp('key=val;key2=val2', 1) は 'key=val&amp;key2=val2' に変換される": function() {
        return [uu.qs.amp('key=val;key2=val2', 1), "==", 'key=val&amp;key2=val2'];
      },


    "End Of Test": ""
  });
}
</script></body></html>
