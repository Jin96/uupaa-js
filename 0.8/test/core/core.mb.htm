<!DOCTYPE HTML><html lang="ja"><head><meta charset="UTF-8" />
<title>uupaa.js - unittest</title>
<style>
.absolute {
    position: absolute; left: 406px; top: 7px;
    width: 98px; height: 99px;
    background-color: gray;
    opacity: 0.2;
}
.relative {
    position: relative; left: 406px; top: 7px;
    width: 98px; height: 99px;
    background-color: gray;
    opacity: 0.2;
}
.static {
    position: static; left: 406px; top: 7px;
    width: 98px; height: 99px;
    background-color: gray;
    opacity: 0.2;
}
.margin { margin: 5px; }
.border { border: 5px solid navy; }
.padding { padding: 5px; }

/* test for left: auto; top: auto */
.auto {
    left: auto; top: auto;
}
</style>
<script src="../../uupaa.mb.js"></script>
</head><body>
<div style="display:none">
    <div id="div" class="class" title="title">text</div>

    <div id="_div" class="class" title="title">text</div>
    <a id="_a" href="/a"></a>
    <label id="_label" for="a" accesskey="a" tabindex="1"></label>
    <table><tr id="_tr" rowspan="2"><td id="_td" colspan="2">aa</td></tr></table>
</div>
<div style="position: relative; max-height: 0px;">
    <div style="position: relative; left: 100px; top: 100px; z-index: -1">
        <div id="abs"       class="absolute">absolute</div>
        <div id="absm"      class="absolute margin">absolute margin</div>
        <div id="absmb"     class="absolute margin border">absolute margin border</div>
        <div id="absmbp"    class="absolute margin border padding">absolute margin border padding</div>
        <div id="absb"      class="absolute border">absolute border</div>
        <div id="absbp"     class="absolute border padding">absolute border padding</div>
        <div id="absp"      class="absolute padding">absolute padding</div>

        <div id="rel"       class="relative">relative</div>
        <div id="relm"      class="relative margin">relative margin</div>
        <div id="relmb"     class="relative margin border">relative margin border</div>
        <div id="relmbp"    class="relative margin border padding">relative margin border padding</div>
        <div id="relb"      class="relative border">relative border</div>
        <div id="relbp"     class="relative border padding">relative border padding</div>
        <div id="relp"      class="relative padding">relative padding</div>

        <div id="sta"       class="static">static</div>
        <div id="stam"      class="static margin">static margin</div>
        <div id="stamb"     class="static margin border">static margin border</div>
        <div id="stambp"    class="static margin border padding">static margin border padding</div>
        <div id="stab"      class="static border">static border</div>
        <div id="stabp"     class="static border padding">static border padding</div>
        <div id="stap"      class="static padding">static padding</div>
    </div>
    <div style="position: relative; left: 100px; top: 100px; z-index: -1">
        <div id="autoabs"       class="absolute auto">absolute</div>
        <div id="autoabsm"      class="absolute margin auto">absolute margin</div>
        <div id="autoabsmb"     class="absolute margin border auto">absolute margin border</div>
        <div id="autoabsmbp"    class="absolute margin border padding auto">absolute margin border padding</div>
        <div id="autoabsb"      class="absolute border auto">absolute border</div>
        <div id="autoabsbp"     class="absolute border padding auto">absolute border padding</div>
        <div id="autoabsp"      class="absolute padding auto">absolute padding</div>

        <div id="autorel"       class="relative auto">relative</div>
        <div id="autorelm"      class="relative margin auto">relative margin</div>
        <div id="autorelmb"     class="relative margin border auto">relative margin border</div>
        <div id="autorelmbp"    class="relative margin border padding auto">relative margin border padding</div>
        <div id="autorelb"      class="relative border auto">relative border</div>
        <div id="autorelbp"     class="relative border padding auto">relative border padding</div>
        <div id="autorelp"      class="relative padding auto">relative padding</div>

        <div id="autosta"       class="static auto">static</div>
        <div id="autostam"      class="static margin auto">static margin</div>
        <div id="autostamb"     class="static margin border auto">static margin border</div>
        <div id="autostambp"    class="static margin border padding auto">static margin border padding</div>
        <div id="autostab"      class="static border auto">static border</div>
        <div id="autostabp"     class="static border padding auto">static border padding</div>
        <div id="autostap"      class="static padding auto">static padding</div>
    </div>
</div>
<script>
uu.ready("window", function() {
    var margin = 5 * 2;
    var border = 5 * 2;
    var padding = 5 * 2;

    uu.ok("uu.css.rect() は style.width + border + padding を取得する");
    uu.ok("position: absolute");
    uu.ok('uu.css.rect("abs")', uu.css.rect(uu.id("abs")), "==", { x: 406, y: 7, w: 98, h: 99, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("absm")', uu.css.rect(uu.id("absm")), "==", { x: 406, y: 7, w: 98, h: 99, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("absmb")', uu.css.rect(uu.id("absmb")), "==", { x: 406, y: 7, w: 98 + border, h: 99 + border, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("absmbp")', uu.css.rect(uu.id("absmbp")), "==", { x: 406, y: 7, w: 98 + border + padding, h: 99 + border + padding, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("absb")', uu.css.rect(uu.id("absb")), "==", { x: 406, y: 7, w: 98 + border, h: 99 + border, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("absbp")', uu.css.rect(uu.id("absbp")), "==", { x: 406, y: 7, w: 98 + border + padding, h: 99 + border + padding, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("absp")', uu.css.rect(uu.id("absp")), "==", { x: 406, y: 7, w: 98 + padding, h: 99 + padding, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok("position: relative");
    uu.ok('uu.css.rect("rel")', uu.css.rect(uu.id("rel")), "==", { x: 406, y: 7, w: 98, h: 99, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("relm")', uu.css.rect(uu.id("relm")), "==", { x: 406, y: 7, w: 98, h: 99, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("relmb")', uu.css.rect(uu.id("relmb")), "==", { x: 406, y: 7, w: 98 + border, h: 99 + border, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("relmbp")', uu.css.rect(uu.id("relmbp")), "==", { x: 406, y: 7, w: 98 + border + padding, h: 99 + border + padding, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("relb")', uu.css.rect(uu.id("relb")), "==", { x: 406, y: 7, w: 98 + border, h: 99 + border, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("relbp")', uu.css.rect(uu.id("relbp")), "==", { x: 406, y: 7, w: 98 + border + padding, h: 99 + border + padding, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok('uu.css.rect("relp")', uu.css.rect(uu.id("relp")), "==", { x: 406, y: 7, w: 98 + padding, h: 99 + padding, from: "body>div:nth-child(2)>div:nth-child(1)" });
    uu.ok("position: static");
    uu.ok('uu.css.rect("sta")', uu.css.rect(uu.id("sta")), "has", { w: 98, h: 99 });
    uu.ok('uu.css.rect("stam")', uu.css.rect(uu.id("stam")), "has", { w: 98, h: 99 });
    uu.ok('uu.css.rect("stamb")', uu.css.rect(uu.id("stamb")), "has", { w: 98 + border, h: 99 + border });
    uu.ok('uu.css.rect("stambp")', uu.css.rect(uu.id("stambp")), "has", { w: 98 + border + padding, h: 99 + border + padding });
    uu.ok('uu.css.rect("stab")', uu.css.rect(uu.id("stab")), "has", { w: 98 + border, h: 99 + border });
    uu.ok('uu.css.rect("stabp")', uu.css.rect(uu.id("stabp")), "has", { w: 98 + border + padding, h: 99 + border + padding });
    uu.ok('uu.css.rect("stap")', uu.css.rect(uu.id("stap")), "has", { w: 98 + padding, h: 99 + padding });
    uu.ok("parentNode が null なら rect は { x:0, y:0, w:0, h:0 } を返す");
    (function() {
        var div = uu.div();

        div.style.width = "101px";
        div.style.height = "102px";

        uu.ok('uu.css.rect(no parentNode)', uu.css.rect(div), "==", { x:0, y:0, w:0, h:0, from: null });
    })();
    uu.ok("left: auto, top: auto のテスト");
    uu.ok("position: absolute + auto");
    uu.ok('uu.css.rect("autoabs")', uu.css.rect(uu.id("autoabs")), "==", { x: 0, y: 0, w: 98, h: 99, from: "body>div:nth-child(2)>div:nth-child(2)" });
    uu.ok('uu.css.rect("autoabsm")', uu.css.rect(uu.id("autoabsm")), "==", { x: 5, y: 5, w: 98, h: 99, from: "body>div:nth-child(2)>div:nth-child(2)" });
    uu.ok('uu.css.rect("autoabsmb")', uu.css.rect(uu.id("autoabsmb")), "==", { x: 5, y: 5, w: 98 + border, h: 99 + border, from: "body>div:nth-child(2)>div:nth-child(2)" });
    uu.ok('uu.css.rect("autoabsmbp")', uu.css.rect(uu.id("autoabsmbp")), "==", { x: 5, y: 5, w: 98 + border + padding, h: 99 + border + padding, from: "body>div:nth-child(2)>div:nth-child(2)" });
    uu.ok('uu.css.rect("autoabsb")', uu.css.rect(uu.id("autoabsb")), "==", { x: 0, y: 0, w: 98 + border, h: 99 + border, from: "body>div:nth-child(2)>div:nth-child(2)" });
    uu.ok('uu.css.rect("autoabsbp")', uu.css.rect(uu.id("autoabsbp")), "==", { x: 0, y: 0, w: 98 + border + padding, h: 99 + border + padding, from: "body>div:nth-child(2)>div:nth-child(2)" });
    uu.ok('uu.css.rect("autoabsp")', uu.css.rect(uu.id("autoabsp")), "==", { x: 0, y: 0, w: 98 + padding, h: 99 + padding, from: "body>div:nth-child(2)>div:nth-child(2)" });
    uu.ok("position: relative + auto");
    uu.ok('uu.css.rect("autorel")', uu.css.rect(uu.id("autorel")), "==", { x: 0, y: 0, w: 98, h: 99, from: "body>div:nth-child(2)>div:nth-child(2)" });
    uu.ok('uu.css.rect("autorelm")', uu.css.rect(uu.id("autorelm")), "has", { x: 5, w: 98, h: 99 });
    uu.ok('uu.css.rect("autorelmb")', uu.css.rect(uu.id("autorelmb")), "has", { x: 5, w: 98 + border, h: 99 + border });
    uu.ok('uu.css.rect("autorelmbp")', uu.css.rect(uu.id("autorelmbp")), "has", { x: 5, w: 98 + border + padding, h: 99 + border + padding });
    uu.ok('uu.css.rect("autorelb")', uu.css.rect(uu.id("autorelb")), "has", { x: 0, w: 98 + border, h: 99 + border });
    uu.ok('uu.css.rect("autorelbp")', uu.css.rect(uu.id("autorelbp")), "has", { x: 0, w: 98 + border + padding, h: 99 + border + padding });
    uu.ok('uu.css.rect("autorelp")', uu.css.rect(uu.id("autorelp")), "has", { x: 0, w: 98 + padding, h: 99 + padding });
    uu.ok("position: static + auto");
    uu.ok('uu.css.rect("autosta")', uu.css.rect(uu.id("autosta")), "has", { w: 98, h: 99 });
    uu.ok('uu.css.rect("autostam")', uu.css.rect(uu.id("autostam")), "has", { w: 98, h: 99 });
    uu.ok('uu.css.rect("autostamb")', uu.css.rect(uu.id("autostamb")), "has", { w: 98 + border, h: 99 + border });
    uu.ok('uu.css.rect("autostambp")', uu.css.rect(uu.id("autostambp")), "has", { w: 98 + border + padding, h: 99 + border + padding });
    uu.ok('uu.css.rect("autostab")', uu.css.rect(uu.id("autostab")), "has", { w: 98 + border, h: 99 + border });
    uu.ok('uu.css.rect("autostabp")', uu.css.rect(uu.id("autostabp")), "has", { w: 98 + border + padding, h: 99 + border + padding });
    uu.ok('uu.css.rect("autostap")', uu.css.rect(uu.id("autostap")), "has", { w: 98 + padding, h: 99 + padding });
    uu.ok();
});

uu.ready("window", function(uu) {

    uu.ok("uu.array()");
    (function() {
        var ary1 = [1, 2];
        var ref1 = ary1;
        uu.ok("[1][through] uu.array([1,2]) は引数で与えられた [1,2] をそのまま返す(複製しない)",
              uu.array(ary1), "===", ref1);
    })();
    uu.ok("[2][to ary] uu.array(12) は [12] を返す", uu.array(12), "==", [12]);
    uu.ok("[2][to ary] uu.array('12') は ['12'] を返す", uu.array('12'), "==", ['12']);
    uu.ok("[3][convert NodeList] uu.array(document.getElementsByTagName('HTML')) は NodeList を配列に変換できる。その結果は uu.query('html') と等しい",
            uu.array(document.getElementsByTagName('HTML')), "==", uu.query('html', document));
    uu.ok("[3][convert NodeList] uu.array(document.getElementsByTagName('HTML')) は NodeList を配列に変換できる。その結果は [document.documentElement] と等しい",
            uu.array(document.getElementsByTagName('HTML')), "==", [document.documentElement]);
    (function() {
        function uuarytest1() {
          return uu.array(arguments);
        }
        var rv = uuarytest1(1, 2, 3);

        uu.ok("[4][convert arguments] uu.array(arguments) は 引数(1, 2, 3)を配列( [1, 2, 3] )に変換できる",
                rv, "==", [1, 2, 3]);
    })();

    uu.ok("uu.has()");
    uu.ok("[1][has array] uu.has([1, 2, 3], 1) は true", uu.has([1, 2, 3], 1), "is true");
    uu.ok("[1][has array] uu.has([1, 2, 3], '1') は false", uu.has([1, 2, 3], '1'), "is false");
    uu.ok("[1][has array] uu.has(['1', 2, 3], '1') は true", uu.has(['1', 2, 3], '1'), "is true");
    uu.ok("[1][has array] uu.has(['1', , 2, 3], 2) は true (粗い配列でもとりあえずOK)", uu.has(['1', , 2, 3], 2), "is true");
    uu.ok("[1][has array] uu.has(['1', , 2, 3], undefined) は false (undefined は検索できない)", uu.has(['1', , 2, 3], undefined), "is false");
    uu.ok("[1][has array] uu.has(['1', undefined, 2, 3], undefined) は false (undefined は検索できない)", uu.has(['1', undefined, 2, 3], undefined), "is false");
    uu.ok("[1][has array] uu.has([1, 2, 3], [1, 2]) は true", uu.has([1, 2, 3], [1, 2]), "is true");
    uu.ok("[2][has node] uu.has([document, document.body], document.body) は true", uu.has([document, document.body], document.body), "is true");
    uu.ok("[3][has node] uu.has([document, document.body, document.getElementsByTagName('head')[0]], [document, document.body]) は true", uu.has([document, document.body, document.getElementsByTagName('head')[0]], [document, document.body]), "is true");

    uu.ok("uu.size()");
    uu.ok("配列サイズは2", uu.size([ 1, 2 ]), "==", 2);
    uu.ok("uu.array.sort()");
    uu.ok("[1][num 0-9] uu.array.sort([11, 222, 4], '0-9') は 数字順(0→9)([4, 11, 222])にソートされる",
            uu.array.sort([4, 11, 222], "0-9"), "==", [4, 11, 222]);
    uu.ok("[2][num 9-0] uu.array.sort([11, 222, 4], '9-0') は 数字順(9→0)([222, 11, 4])にソートされる",
            uu.array.sort([4, 11, 222], "9-0"), "==", [222, 11, 4]);
    uu.ok("[3][ascii a-z] uu.array.sort(['z', 'a', 'b', 'c'], 'A-Z') は 英字順(A→Z)(['a', 'b', 'c', 'z'])にソートされる",
            uu.array.sort(['z', 'a', 'b', 'c'], "A-Z"), "==", ['a', 'b', 'c', 'z']);
    uu.ok("[4][ascii a-z] uu.array.sort(['z', 'a', 'b', 'c'], 'Z-A') は 英字順(Z→A)(['z', 'c', 'b', 'a'])にソートされる",
            uu.array.sort(['z', 'a', 'b', 'c'], "Z-A"), "==", ['z', 'c', 'b', 'a']);
    uu.ok("[5][user func] uu.array.clean([,,1,2,,]) は [1, 2]", uu.array.clean([,,1,2,,]), "==", [1, 2]);


    uu.ok("uu.array.clean()");

    (function() {
        var ary = [1, 2, 3];
        delete ary[1];

        uu.ok("uu.array.clean(var ary=[1,2,3]; delete ary[1]) == [1,3]。uu.array.clean は 欠落(delete)した要素や null をスキップする",
                uu.array.clean(ary), "==", [1, 3]);
    })();
    (function() {
        var ary = [1,2,,null,3];
        delete ary[1];

        uu.ok("uu.array.clean(var ary=[1,2,,null,3]; delete ary[1]) == [1,3]。uu.array.clean は 欠落(delete)した要素や null をスキップする",
            uu.array.clean(ary), "==", [1, 3]);
    })();
    uu.ok("uu.array.clean([,,1,2,,]) == [1, 2]", uu.array.clean([,,1,2,,]), "==", [1, 2]);
    uu.ok("uu.array.clean([,null,1,2,,]) == [1, 2]", uu.array.clean([,null,1,2,,]), "==", [1, 2]);
    uu.ok("uu.array.clean([null]) == []", uu.array.clean([null]), "==", []);
    uu.ok("uu.array.clean([void 0]) == []", uu.array.clean([void 0]), "==", []);
    uu.ok("uu.array.clean([]) == []", uu.array.clean([]), "==", []);

    uu.ok("uu.byteArray.dump()");
    uu.ok('uu.byteArray.dump([1, 2, 3]) == "010203"', uu.byteArray.dump([1, 2, 3]), "==", "010203");
    uu.ok('uu.byteArray.dump([1, 2, 3], "0x", ", 0x") == "0x01, 0x02, 0x03"', uu.byteArray.dump([1, 2, 3], "0x", ", 0x"), "==", "0x01, 0x02, 0x03");

    uu.ok("Array.filter()");
    uu.ok("Array.filter([12, 5, 8, 130, 44], function(v) { return v >= 10; }) は [12, 130, 44] を返す",
            [12, 5, 8, 130, 44].filter(function(v) { return v >= 10; }), "==", [12, 130, 44]);
    uu.ok("Array.every()");
    uu.ok("Array.every([12, 5, 8, 130, 44], function(v) { return v >= 10; }) は false を返す",
            [12, 5, 8, 130, 44].every(function(v) { return v >= 10; }), "is false");
    uu.ok("Array.every([12, 54, 18, 130, 44], function(v) { return v >= 10; }) は true を返す",
            [12, 54, 18, 130, 44].every(function(v) { return v >= 10; }), "is true");
    uu.ok("Array.some()");
    uu.ok("Array.some([12, 5, 8, 130, 44], function(v) { return v < 10; }) は true を返す",
            [12, 5, 8, 130, 44].some(function(v) { return v < 10; }), "is true");
    uu.ok("Array.some([12, 54, 18, 130, 44], function(v) { return v < 10; }) は false を返す",
            [12, 54, 18, 130, 44].some(function(v) { return v < 10; }), "is false");
    uu.ok("Array.map()");
    uu.ok("Array.map([1, 2, 3, 4, 5], function(v) { return v * 2; }) は [2, 4, 6, 8, 10] を返す",
            [1, 2, 3, 4, 5].map(function(v) { return v * 2; }), "==", [2, 4, 6, 8, 10]);
    uu.ok("uu.attr()");
    uu.ok("[1][get all pair] uu.attr(uu.id('div')) は Hash を返す(結果はブラウザ依存)",
            uu.attr(uu.id('div')), "is hash");
    uu.ok("[2][get pair] uu.attr(uu.id('div'), 'id') は 'div' } と等しい",
            uu.attr(uu.id('div'), 'id'), "==", 'div');

    if (uu.attr(uu.id('div'), 'title', 'hoge') !== uu.id('div')) {
        uu.ok("[3][set pair] uu.attr(uu.id('div'), 'title', 'hoge') は node を返し、title は hoge に設定される",
                uu.attr(uu.id('div'), 'title', 'hoge'), "is fail");
    } else {
        uu.ok("[3][set pair] uu.attr(uu.id('div'), 'title', 'hoge') は node を返し、title は hoge に設定される",
                uu.attr(uu.id('div'), 'title'), "==", 'hoge');
    }

    if (uu.attr(uu.id('div'), { 'class': 'A1', title: 'title' }) !== uu.id('div')) {
        uu.ok("[4][set pair] uu.attr(uu.id('div'), { 'class': 'A1', title: 'title' }) は node を返し、className は A1 に、 title は title に設定される",
                uu.attr(uu.id('div'), { 'class': 'A1', title: 'title' }), "is fail");
    } else {
        uu.ok("[4][set pair] uu.attr(uu.id('div'), { 'class': 'A1', title: 'title' }) は node を返し、className は A1 に、 title は title に設定される",
                uu.attr(uu.id('div'), 'title'), "==", 'title');
    }

    (function() {
        var e;
        document.body.appendChild(e = uu.a({ href: "http://example.com/", title: "long" }, "link"));
        var v = uu.attr(e, "href");

        uu.ok("[IE][FIX] hrefが絶対URLなら、設定値をそのまま取得する、uu.attr({ href: 'http://example.com/' })",
                v, "==", "http://example.com/");
    })();

    (function() {
        var e;
        document.body.appendChild(e = uu.a({ href: "../dummy.jpg", title: "long" }, "link"));
        var v = uu.attr(e, "href");

        uu.ok("[IE][FIX] hrefが相対URLでも、設定値をそのまま取得する(フルパスに変換しない)、uu.attr({ href: '../dummy.jpg' })",
            v, "==", "../dummy.jpg");
    })();

    uu.ok("[get class] uu.attr(uu.id('_div'), 'class') は 'class' } と等しい",
            uu.attr(uu.id('_div'), 'class'), "==", 'class');
    uu.ok("[get className] uu.attr(uu.id('_div'), 'className') は 'class' } と等しい",
            uu.attr(uu.id('_div'), 'className'), "==", 'class');
    uu.ok("[get for] uu.attr(uu.id('_label'), 'for') は 'a' } と等しい",
            uu.attr(uu.id('_label'), 'for'), "==", 'a');
    uu.ok("[get htmlFor] uu.attr(uu.id('_label'), 'htmlFor') は 'a' } と等しい",
            uu.attr(uu.id('_label'), 'htmlFor'), "==", 'a');
    uu.ok("[get colspan] uu.attr(uu.id('_td'), 'colspan') は '2' } と等しい",
            uu.attr(uu.id('_td'), 'colspan'), "==", '2');
    uu.ok("[get colSpan] uu.attr(uu.id('_td'), 'colSpan') は '2' } と等しい",
            uu.attr(uu.id('_td'), 'colSpan'), "==", '2');
    uu.ok("[get rowspan] uu.attr(uu.id('_tr'), 'rowspan') は '2' } と等しい",
            uu.attr(uu.id('_tr'), 'rowspan'), "==", '2');
    uu.ok("[get rowSpan] uu.attr(uu.id('_tr'), 'rowSpan') は '2' } と等しい",
            uu.attr(uu.id('_tr'), 'rowSpan'), "==", '2');
    uu.ok("[get accesskey] uu.attr(uu.id('_label'), 'accesskey') は 'a' } と等しい",
            uu.attr(uu.id('_label'), 'accesskey'), "==", 'a');
    uu.ok("[get accessKey] uu.attr(uu.id('_label'), 'accessKey') は 'a' } と等しい",
            uu.attr(uu.id('_label'), 'accessKey'), "==", 'a');
    uu.ok("[get tabindex] uu.attr(uu.id('_label'), 'tabindex') は '1' } と等しい",
            uu.attr(uu.id('_label'), 'tabindex'), "==", '1');
    uu.ok("[get tabIndex] uu.attr(uu.id('_label'), 'tabIndex') は '1' } と等しい",
            uu.attr(uu.id('_label'), 'tabIndex'), "==", '1');

    uu.ok("uu.attr() - set attr");
    (function() {
        uu.attr(uu.id('div'), { title: 'unittest' });

        var rv = uu.attr(uu.id('div'), 'title');

        uu.ok("[1][set some attrs] uu.attr(uu.id('div'), { title: 'unittest' }) で設定された値と uu.attr(uu.id('div'), 'title') の結果は等しい",
                "unittest", "==", rv);
    })();

    uu.ok("uu.Class()");
    (function() {
        uu.Class("UNITTEST1");

        var obj1 = uu("UNITTEST1");
        var obj2 = uu("UNITTEST1");

        uu.ok("uu.Class は複数回生成すると別々のインスタンスを返す", obj1, "!=", obj2);
    })();

    uu.ok("uu.Class.singleton()");
    (function() {
        uu.Class.singleton("UNITTEST2");
        var obj1 = uu("UNITTEST2");
        var obj2 = uu("UNITTEST2");

        uu.ok("uu.Class.singleton は複数回生成しても同じインスタンスを返す",
                obj1, "==", obj2);
    })();

    uu.ok("uu(new Class)");
    (function() {
        uu.Class("UNITTEST1"); // define

        var obj1 = uu("UNITTEST1");

        uu.ok("[1][create instance] uu('UNITTEST1', 1, 2) は new uu.Class('UNITTEST1', 1, 2) の結果(インスタンス)を返す",
                obj1, "instanceof", uu.Class.UNITTEST1);
    })();

    uu.ok("uu.klass.has()");
    (function() {
        uu.id('div').className = "";
        uu.klass(uu.id('div'), "A1 A2 A3");
        uu.ok("uu.klass.has(uu.id('div')) ( 'A1 A2 A3') は 'A1 A3' を含んでいる",
            uu.klass.has(uu.id('div'), "A1 A3"), "is true");


        uu.id('div').className = "";
        uu.klass(uu.id('div'), "A1 A2 A3");
        uu.ok("uu.klass.has(uu.id('div')) ( 'A1 A2 A3') は ' A2 ' を含んでいる",
            uu.klass.has(uu.id('div'), " A2 "), "is true");


        uu.id('div').className = "";
        uu.klass(uu.id('div'), "あ い う");
        uu.ok("uu.klass.has(uu.id('div')) ( 'あ い う') は ' い ' を含んでいる",
            uu.klass.has(uu.id('div'), " い "), "is true");


        uu.id('div').className = "";
        uu.klass(uu.id('div'), "うい");
        uu.ok("uu.klass.has(uu.id('div')) ( 'うい') は 'い' を含んでいない",
            uu.klass.has(uu.id('div'), "い"), "is false");
    })();


    uu.ok("uu.klass() add className");
    (function() {
        uu.id('div').className = "";
        uu.klass(uu.id('div'), "A1 A2 A3");
        uu.klass(uu.id('div'), "A4 A1");

        uu.ok("uu.klass(uu.id('div')) ( ' A1 A2 A3' ) に 'A4 A1' を足すと ' A1 A2 A3 A4 A1' になる",
            uu.id('div').className, "==", ' A1 A2 A3 A4 A1');
    })();

    uu.ok("uu.klass() add className +");
    (function() {
        uu.id('div').className = "";
        uu.klass(uu.id('div'), "+A1 A2 A3");
        uu.klass(uu.id('div'), "+A4 A1");

        uu.ok("uu.klass(uu.id('div')) ( ' A1 A2 A3' ) に 'A4 A1' を足すと ' A1 A2 A3 A4 A1' になる",
            uu.id('div').className, "==", ' A1 A2 A3 A4 A1');
    })();


    uu.ok("uu.klass() remove className -");
    (function() {
        uu.id('div').className = "A1 A2 A3 A4 A1";
        uu.klass(uu.id('div'), "-A1  A4");
        uu.ok("uu.klass(uu.id('div')) ( 'A1 A2 A3 A4 A1' )から( 'A1　　A4' )を引くと 'A2 A3' になる",
            uu.id('div').className, "==", 'A2 A3');


        uu.id('div').className = "B1 B2";
        uu.klass(uu.id('div'), "-A1 A2 A3 A4 A1");
        uu.ok("uu.klass(uu.id('div')) ( 'B1 B2' )から 存在しないクラス( 'A1 A2 A3 A4 A1' )を引いてもエラーにならない",
            uu.id('div').className, "==", 'B1 B2');
    })();


    uu.ok("uu.klass() toggle className !");
    (function() {
        uu.id('div').className = "A1 A2 B1 B2";
        uu.klass(uu.id('div'), "!A2 B2");
        uu.ok("uu.klass(uu.id('div')) ( 'A1 A2 B1 B2' ) から 'A2 B2' をトグルすると、'A1 B1' になる",
            uu.id('div').className, "==", 'A1 B1');


        uu.id('div').className = "A1 B1";
        uu.klass(uu.id('div'), "!A2 B2");
        uu.ok("uu.klass(uu.id('div')) ( 'A1 B1' ) から 'A2 B2' をトグルすると、'A1 B1 A2 B2' になる",
            uu.id('div').className, "==", 'A1 B1 A2 B2');
    })();

    uu.ok("uu.hash()");
    (function() {
        uu.ok("uu.hash('a,b,c,d') は文字列をパースし { a: 'b', c: 'd' } を返す", uu.hash('a,b,c,d'), "==", { a: 'b', c: 'd' });
        uu.ok("uu.hash('a:b,c:d') は文字列をパースし { a: 'b', c: 'd' } を返す", uu.hash('a:b,c:d'), "==", { a: 'b', c: 'd' });
        uu.ok("uu.hash('a:b;c:d') は文字列をパースし { a: 'b', c: 'd' } を返す", uu.hash('a:b;c:d'), "==", { a: 'b', c: 'd' });
    })();

    uu.ok("uu.has()");
    (function() {
        uu.ok("uu.has({ a: 1, b: 2, c: 3 }, { a: 1, b: 2 }) == true",
            uu.has({ a: 1, b: 2, c: 3 }, { a: 1, b: 2 }), "is true");
        uu.ok("uu.has({ a: 1, b: 2, c: 3 }, { a: '1', b: 2 }) == false",
            uu.has({ a: 1, b: 2, c: 3 }, { a: '1', b: 2 }), "is false");
        uu.ok("uu.has({ a: function() { return 'a'}, b: 2, c: 3 }, { a: function() { return 'a'}, b: 2 }) == true",
            uu.has({ a: function() { return 'a'}, b: 2, c: 3 }, { a: function() { return 'a'}, b: 2 }), "is true");
        uu.ok("uu.has({ a: function() { return 'b'}, b: 2, c: 3 }, { a: function() { return 'a'}, b: 2 }) == true  無名関数は同じものとして比較するため true になる",
            uu.has({ a: function() { return 'b'}, b: 2, c: 3 }, { a: function() { return 'a'}, b: 2 }), "is true");

        function hoge() {
            return "b";
        }
        function huga() {
            return "c";
        }

        uu.ok("uu.has({ a: function hoge() { return 'b'}, b: 2, c: 3 }, { a: function huga() { return 'a'}, b: 2 }) == false  名前を持っている関数はfunction.name を比較するため false になる",
            uu.has({ a: hoge, b: 2, c: 3 }, { a: huga, b: 2 }), "is false");
    })();

    uu.ok("uu.size()");
    uu.ok("ハッシュサイズは2",
            uu.size({ aaa: 1, bbb: 2 }), "==", 2);

    uu.ok("uu.keys()");
    uu.ok("{ key: 1, key2: 2 } から key の配列[key, key2]を生成する",
            uu.keys({ key: 1, key2: 2 }), "==", ["key", "key2"]);

    uu.ok("uu.values()");
    uu.ok("{ key: 1, key2: 2 } から値の配列[1,2]を生成する",
            uu.values({ key: 1, key2: 2 }), "==", [1, 2]);

    uu.ok("uu.filter()");
    uu.ok("uu.filter([uu.nop, 1, 'a'], uu.isFunction).match == [uu.nop]",
            uu.filter([uu.nop, 1, 'a'], uu.isFunction).match, "==", [uu.nop]);
    uu.ok("uu.filter([uu.nop, 1, 'a'], uu.isNumber).match == [1]",
            uu.filter([uu.nop, 1, 'a'], uu.isNumber).match, "==", [1]);
    uu.ok("uu.filter([uu.nop, 1, 'a'], uu.isString).match ==['a']",
            uu.filter([uu.nop, 1, 'a'], uu.isString).match, "==", ['a']);
    uu.ok("uu.filter([[1, 2], 1, 'a'], Array.isArray).match == [[1, 2]]",
            uu.filter([[1, 2], 1, 'a'], Array.isArray).match, "==", [[1, 2]]);

    uu.ok("uu.indexOf()");
    uu.ok("uu.indexOf({ a: 1, b: 2, c: 2 }, 2) == 'b'",
            uu.indexOf({ a: 1, b: 2, c: 2 }, 2), "==", 'b');

    uu.ok("uu.nth(first)");
    uu.ok("{ key: 1, key2: 2 } から先頭のpairを配列['key', 1]で取得する",
            uu.nth({ key: 1, key2: 2 }), "==", ["key", 1]);
    uu.ok("[1, 2] から先頭のpairを配列[0, 1]で取得する",
            uu.nth([1, 2]), "==", [0, 1]);

    uu.ok("uu.nth(last)");
    uu.ok("{ key: 1, key2: 2 } から末尾のpairを配列['key2', 2]で取得する",
            uu.nth({ key: 1, key2: 2 }, -1), "==", ["key2", 2]);
    uu.ok("[1, 2] から末尾のpairを配列[1, 2]で取得する",
            uu.nth([1, 2], -1), "==", [1, 2]);

    uu.ok("uu.array.toHash()");
    uu.ok("['key', 'key2'] と ['1', '2'] から { key: '1', key2: '2' } を生成する",
            uu.array.toHash(['key', 'key2'], ['1', '2']), "==", { key: '1', key2: '2' });
    uu.ok("['key', 'key2'] と ['1', '2'] から { key: 1, key2: 2 } を生成する(value を数値化)",
            uu.array.toHash(['key', 'key2'], ['1', '2'], 1), "==", { key: 1, key2: 2 });
    uu.ok("['key', 'key2'] と '1' から { key: '1', key2: '1' } を生成する",
            uu.array.toHash(['key', 'key2'], '1'), "==", { key: '1', key2: '1' });
    uu.ok("['key', 'key2'] と '1' から { key: 1, key2: 1 } を生成する(value を数値化)",
            uu.array.toHash(['key', 'key2'], '1', 1), "==", { key: 1, key2: 1 });


    uu.ok("MessagePump");
    (function() {
        uu.Class("MSGBOXTEST1", {
          msgbox: function(msg, param) {
  //          uu.puff("got msg: %s %s", msg, param);
            return 1;
          }
        });
        uu.Class("MSGBOXTEST2", {
          msgbox: function(msg, param) {
  //          uu.puff("got msg: %s %s", msg, param);
            return 2;
          }
        });
        var obj1 = uu("MSGBOXTEST1");
        var obj2 = uu("MSGBOXTEST2");

        var rv1 = uu.msg.send(obj1, "obj1 == obj2", "p1");
        var rv2 = uu.msg.send(obj2, "obj2 == obj1", "p1");

        uu.ok("MSGBOXTEST1 と MSGBOXTEST2 にユニキャストすると [1] と [2] が帰ってくる",
            rv1[0] === 1, "&&", rv2[0] === 2);
    })();


    uu.ok("uu.node.add()");
    (function() {
        var fg = '\
<div id="ctx">\
  <div id="first">first</div>\
  <div id="prev">prev</div>\
  <div id="tgt">tgt\
    <div id="firstChild">firstChild</div>\
    <div><div id="onlyChild"></div></div>\
    <div id="lastChild">lastChild</div>\
  </div>\
  <div id="next">next</div>\
  <div id="last">last</div>\
</div>';

        uu.ok("uu.node.add('<div id=\"ctx\">...</div>') is node",
            uu.node.add(fg), "is node");
    })();

    uu.ok("uu.node.has()");
    uu.ok("uu.node.has(uu.id('ctx'), uu.id('tgt')) == true",
            uu.node.has(uu.id('ctx'), uu.id('tgt')), "is true");
    uu.ok("uu.node.has(uu.id('ctx'), uu.id('ctx')) == false",
            uu.node.has(uu.id('ctx'), uu.id('ctx')), "is false");
    uu.ok("uu.node.has(uu.id('ctx'), document.body) == false",
            uu.node.has(uu.id('ctx'), document.body), "is false");


    uu.ok("uu.node.bros()");
    uu.ok("uu.node.bros(uu.id('tgt'))",
            uu.node.bros(uu.id('tgt')).length, "==", 5);
    uu.ok("uu.node.bros(uu.id('tgt'))",
            uu.node.bros(uu.id('tgt')).first, "==", uu.id("first"));
    uu.ok("uu.node.bros(uu.id('tgt'))",
            uu.node.bros(uu.id('tgt')).prev, "==", uu.id("prev"));
    uu.ok("uu.node.bros(uu.id('tgt'))",
            uu.node.bros(uu.id('tgt')).next, "==", uu.id("next"));
    uu.ok("uu.node.bros(uu.id('tgt'))",
            uu.node.bros(uu.id('tgt')).last, "==", uu.id("last"));
    uu.ok("uu.node.bros(uu.id('tgt'))",
            uu.node.bros(uu.id('tgt')).index, "==", 2);

    uu.ok("uu.node.bros(uu.id('firstChild'))",
            uu.node.bros(uu.id('firstChild')).length, "==", 3);


    uu.ok("uu.node.remove()");
    uu.ok("uu.node.remove(uu.id('ctx'))",
            uu.node.remove(uu.id('ctx')), "is node");

    uu.ok("uu.data()");
    (function() {
        uu.ok("[1][get all pair] uu.data(document.body) で bodyに格納したデータが取り出せる(Hash が返る)",
                uu.data(document.body), "is hash");


        uu.data(document.body, 'key', 'value');
        var rv = uu.data(document.body, 'key');
        uu.ok("[2][get pair] uu.data(document.body, 'key', 'value') で body に設定されたデータ(key)を取り出せる",
                rv, "==", 'value');


        uu.data(document.body, 'key', 'value'); // set
        uu.data(document.body, 'key', null);    // remove
        var rv = uu.data(document.body, 'key'); // get
        uu.ok("[3][set pair] uu.data(document.body, 'key', null) で body に設定されているデータ(key)を削除できる",
            rv, "is null");


        uu.ok("uu.data.clear()");


        uu.data.clear(document.body, 'key');
        var rv = uu.data(document.body, 'key');
        uu.ok("[1][clear data] uu.data.clear(document.body, 'key') で key に関連するデータを消せる(null になる)",
            rv, "is null");


        uu.data(document.body, 'key', { hoge: 1, huga: 2 });
        uu.data.clear(document.body, 'key');
        var rv = uu.data(document.body, 'key');
        uu.ok("[1][clear data] uu.data.clear(document.body, 'key') で key に関連するデータを消せる(value = { hoge: 1, huga: 2 })",
            rv, "is null");


        uu.data.clear(document.body, 'key');
        var rv = uu.data(document.body, 'key');
        uu.ok("[1][clear data] uu.data.clear(document.body, 'key') で key に関連するデータを消せる(value = null)",
            rv, "is null");


        uu.data(document.body, 'key', { hoge: 1, huga: 2 });
        uu.data.clear(document.body);
        var rv = uu.data(document.body, 'key');
        uu.ok("[2][clear all data] uu.data.clear(document.body) ノードに保存したデータを全て消せる",
            rv, "is null");
    })();


    uu.ok("uu.fix()");
    uu.ok('uu.fix("-webkit-shadow") == "-webkit-shadow"',
            uu.fix("-webkit-shadow"), "==", "-webkit-shadow");
    if (uu.webkit) {
        uu.ok('uu.fix("-webkit-box-shadow") == "WebkitBoxShadow"',
                uu.fix("-webkit-box-shadow"), "==", "WebkitBoxShadow");
    }
    if (uu.gecko) {
        uu.ok('uu.fix("-moz-appearance") == "MozAppearance"',
                uu.fix("-moz-appearance"), "==", "MozAppearance");
    }
    if (uu.ie && uu.env >= 8) {
        uu.ok('uu.fix("-ms-block-progression") == "msBlockProgression"',
                uu.fix("-ms-block-progression"), "==", "msBlockProgression");
    }
    if (uu.opera && uu.env >= 10.50) {
        uu.ok('uu.fix("-o-transition-property") == "OTransitionProperty"',
                uu.fix("-o-transition-property"), "==", "OTransitionProperty");
    }

    uu.ok('uu.fix("background-color") == "backgroundColor"',
            uu.fix("background-color"), "==", "backgroundColor");
    uu.ok('uu.fix("float") == "cssFloat" or "styleFloat"(IE6, IE7)',
            uu.fix("float"), "==", uu.ie && uu.env < 8 ? "styleFloat" : "cssFloat")

    if (uu.env.ie6 || uu.env.ie7) {
        uu.ok('uu.fix("for") == "for"',
                uu.fix("for"), "!=", "for");
    } else {
        uu.ok('uu.fix("for") == "for"',
                uu.fix("for"), "==", "for");
    }

    if (uu.env.ie6 || uu.env.ie7) {
        uu.ok('uu.fix("htmlFor") == "for"',
                uu.fix("htmlFor"), "!=", "for");
    } else {
        uu.ok('uu.fix("htmlFor") == "for"',
                uu.fix("htmlFor"), "==", "for");
    }

    uu.ok('uu.fix("w") == "width"',
            uu.fix("w"), "==", "width");
    uu.ok('uu.fix("h") == "height"',
            uu.fix("h"), "==", "height");
    uu.ok('uu.fix("x") == "left"',
            uu.fix("x"), "==", "left");
    uu.ok('uu.fix("l") == "left"',
            uu.fix("l"), "==", "left");
    uu.ok('uu.fix("y") == "top"',
            uu.fix("y"), "==", "top");
    uu.ok('uu.fix("t") == "top"',
            uu.fix("t"), "==", "top");
    uu.ok('uu.fix("o") == "opacity"',
            uu.fix("o"), "==", "opacity");
    uu.ok('uu.fix("c") == "color"',
            uu.fix("c"), "==", "color");
    uu.ok('uu.fix("bgc") == "backgroundColor"',
            uu.fix("bgc"), "==", "backgroundColor");
    uu.ok('uu.fix("fs") == "fontSize"',
            uu.fix("fs"), "==", "fontSize");

    uu.ok("uu.trim()");
    uu.ok("uu.trim('nospace') == 'nospace'",
            uu.trim('nospace'), "==", 'nospace');
    uu.ok("uu.trim('has space') == 'has space'",
            uu.trim('has space'), "==", 'has space');
    uu.ok("uu.trim('  has  space  ') == 'has  space'",
            uu.trim('  has  space  '), "==", 'has space');
    uu.ok("uu.trim('') == ''",
            uu.trim(''), "==", '');
    uu.ok("uu.trim('  diet  inner  space  ') == 'diet inner space'",
            uu.trim('  diet  inner  space  '), "==", 'diet inner space');

    uu.ok("uu.trim.tag()");
    uu.ok('uu.trim.tag(" <h1>A</h1>  B  <p>C</p> ") == "A B C"',
            uu.trim.tag(" <h1>A</h1>  B  <p>C</p> "), "==", "A B C");
    uu.ok('uu.trim.tag("A B C</p> ") == "A B C"',
            uu.trim.tag("A B C</p> "), "==", "A B C");
    uu.ok('uu.trim.tag("<div>A B C</p> ") == "A B C"',
        uu.trim.tag("<div>A B C</p> "), "==", "A B C");
    uu.ok('uu.trim.tag("<div><p>A</p></div> B<p>  C</p> ") == "A B C"',
        uu.trim.tag("<div><p>A</p></div> B<p>  C</p> "), "==", "A B C");

    uu.ok("uu.trim.func()");
    uu.ok('uu.trim.func(\' url("http://...") \') == \'"http://..."\'',
        uu.trim.func(' url("http://...")' ), "==", '"http://..."');
    uu.ok("uu.trim.func(\"url('http://...')\") == \"'http://...'\"",
        uu.trim.func("url('http://...')"), "==", "'http://...'");
    uu.ok("uu.trim.quote(uu.trim.func(\"url('http://...')\")) == 'http://...'",
        uu.trim.quote(uu.trim.func("url('http://...')")), "==", "http://...");
    uu.ok("uu.trim.func('rgba(1, 2, 3, 0)') == \"1, 2, 3, 0\"",
        uu.trim.func('rgba(1, 2, 3, 0)'), "==", "1, 2, 3, 0");
    uu.ok("uu.trim.func('http://...') == \"http://...\" 関数() で囲まれていない場合は何もしない",
        uu.trim.func('http://...'), "==", "http://...");


    uu.ok("uu.trim.quote()");

    uu.ok("uu.trim.quote(\" 'has  space' \") == \"has  space\"",
        uu.trim.quote(" 'has  space' "), "==", "has  space");
      uu.ok('uu.trim.quote(\' "has  space" \') == "has  space"',
        uu.trim.quote(' "has  space" '), "==", "has  space");


    var dateHash = uu.date();
    uu.ok("uu.date");
    uu.ok("uu.date() は DateHash を返す",
        dateHash, "is hash");

    uu.ok("uu.date().ISO() は現在時刻を ISO8601 形式で返す",
        uu.date().ISO(), "is string");

    uu.ok("uu.date().GMT() は現在時刻を GMT (RFC1123) 形式で返す",
        uu.date().GMT(), "is string");

    (function() {
        var now = new Date;
        now.setMilliseconds(0); // ms を切り落として比較する

        var dateHash = uu.date(now);

        var isoString = dateHash.ISO();
        var rv = uu.date(isoString);

        uu.ok("uu.date(uu.date(new Date).ISO()) で元に戻る",
            dateHash.time, "==", rv.time);
    })();
    (function() {
        var now = new Date;
        now.setMilliseconds(0); // ms を切り落として比較する

        var dateHash = uu.date(now);

        var isoString = dateHash.GMT();
        var rv = uu.date(isoString);

        uu.ok("uu.date(uu.date(new Date).GMT()) で元に戻る",
            dateHash.time, "==", rv.time);
    })();

    uu.ok("Type");
    uu.ok("null は null 型",                        null,       "is null");
    uu.ok("void 0 は undefined 型(is undefined)",   void 0,     "is undefined");
    uu.ok("{} は hash 型(is hash)",                 {},         "is hash");
    uu.ok("[] は array 型(is array)",               [],         "is array");
    uu.ok("[] は array 型(is array)",               [],         "is array");
    uu.ok("false は boolean 型(is boolean)",        false,      "is boolean");
    uu.ok("true は boolean 型(is boolean)",         true,       "is boolean");
    uu.ok("123 は number 型(is number)",            123,        "is number");
    uu.ok("-123.4 は number 型(is number)",         -123.4,     "is number");
    uu.ok("1 / 0 は number 型(is number)",          1 / 0,      "is number");
    uu.ok("0 / 0 は number 型(is number)",          0 / 0,      "is number");
    uu.ok("'' は string 型(is string)",             '',         "is string");
    uu.ok("function(){} は function 型",            function(){}, "is function");
    uu.ok("document.body は node 型",               document.body, "is node");
    uu.ok("document.getElementsByTagName('body') は fake 型",
                                                    document.getElementsByTagName('body'), "is FakeArray");
    uu.ok("new Date は date 型",                    new Date,   "is date");
    uu.ok("uu.type(123) は Number 型 の戻り値を返す",
                                                    uu.type(123), "is number");
    uu.ok("uu.type(123) === uu.type.STRING は false",
                                                    uu.type(123) === uu.type.STRING, "is false");
    uu.ok("new Boolean(false) は boolean 型",
                                                    new Boolean(false), "is boolean");
    uu.ok("new Number(1) は number 型",
                                                    new Number(''), "is number");
    uu.ok("new String('') は string 型",
                                                    new String(''), "is string");

    uu.ok("Array.isArray()");
    uu.ok("Array.isArray([]) is true",          Array.isArray([]), "is true");
    uu.ok("Array.isArray(new Array) is true",   Array.isArray(new Array), "is true");
    uu.ok("Array.isArray(Array()) is true",     Array.isArray(Array()), "is true");
    uu.ok("Array.isArray('abc'.match(/(a)+/g)) is true",
                                                Array.isArray('abc'.match(/(a)+/g)), "is true");
    uu.ok("Array.isArray((function(){ return Array.isArray(arguments); })()) is false",
                                                (function(){ return Array.isArray(arguments); })(), "is false");
    uu.ok("Array.isArray() is false",           Array.isArray(), "is false");
    uu.ok("Array.isArray(null) is false",       Array.isArray(null), "is false");
    uu.ok("Array.isArray(undefined) is false",  Array.isArray(undefined), "is false");
    uu.ok("Array.isArray(true) is false",       Array.isArray(true), "is false");
    uu.ok("Array.isArray(false) is false",      Array.isArray(false), "is false");
    uu.ok("Array.isArray('a string') is false", Array.isArray('a string'), "is false");
    uu.ok("Array.isArray({}) is false",         Array.isArray({}), "is false");
    uu.ok("Array.isArray({length: 5}) is false",Array.isArray({length: 5}), "is false");
    uu.ok("Array.isArray({__proto__: Array.prototype, length:1, 0:1, 1:2}) is false",
                                                Array.isArray({__proto__: Array.prototype, length:1, 0:1, 1:2}), "is false");


    uu.ok("2010-04-29");
    (function() {
        uu.Class("SyntaxSugar", function() {
            this.val = 1;
        });

        uu.Class("FullSyntax", {
            init: function() {
                this.val = 1;
            }
        });

        var obj1 = uu("SyntaxSugar");
        var obj2 = uu("FullSyntax");

        uu.ok("uu.Class('SyntaxSugar', function() {\n this.val = 1;\n})\nは\nuu.Class('FullSyntax', {\ninit: function() {\nthis.val = 1;\n}\n})\nのシンタックスシュガーとして機能する",
            obj1.val, "==", obj2.val);
    })();

    uu.ok("Array.reduce");
    (function() {
        var rv = [0,1,2,3,4].reduce(function(p, c, i){ return p + c; });
        uu.ok("[0,1,2,3,4].reduce(function(p, c, i){ return p + c; })",
            rv, "==", 10);


        var rv = [0,1,2,3,4].reduce(function(p, c, i){ return p + c; }, 10);
        uu.ok("[0,1,2,3,4].reduce(function(p, c, i){ return p + c; }, 10)",
            rv, "==", 20);


        var rv = [0, 1, 2, 3].reduce(function(a, b){ return a + b; });
        uu.ok("[0, 1, 2, 3].reduce(function(a, b){ return a + b; })",
            rv, "==", 6);


        var rv = [[0,1], [2,3], [4,5]].reduce(function(a,b) { return a.concat(b); }, []);
        uu.ok("[[0,1], [2,3], [4,5]].reduce(function(a,b) { return a.concat(b); }, [])",
            rv, "==", [0, 1, 2, 3, 4, 5]);
    })();

    uu.ok("Array.reduceRight");
    (function() {
        var rv = [0,1,2,3,4].reduceRight(function(p, c, i){ return p + c; });
        uu.ok("[0,1,2,3,4].reduceRight(function(p, c, i){ return p + c; })",
            rv, "==", 10);


        var rv = [0,1,2,3,4].reduceRight(function(p, c, i){ return p + c; }, 10);
        uu.ok("[0,1,2,3,4].reduceRight(function(p, c, i){ return p + c; }, 10)",
            rv, "==", 20);


        var rv = [0, 1, 2, 3].reduceRight(function(a, b){ return a + b; });
        uu.ok("[0, 1, 2, 3].reduceRight(function(a, b){ return a + b; })",
            rv, "==", 6);


        var rv = [[0,1], [2,3], [4,5]].reduceRight(function(a,b) { return a.concat(b); }, []);
        uu.ok("[[0,1], [2,3], [4,5]].reduceRight(function(a,b) { return a.concat(b); }, [])",
            rv, "==", [4, 5, 2, 3, 0, 1] );
    })();


    uu.ok("uu.color()");
    (function() {
        // extend type Color
        uu.type.COLOR = function(lhs, operator) {
            return lhs instanceof uu.Class.Color;
        };
        // extend type HSLAHASH
        uu.type.HSLAHASH = function(lhs, operator) {
            return "h" in lhs && "s" in lhs && "l" in lhs && "a" in lhs;
        };

        uu.ok("uu.color('#00007b').rgba で RGBAString( 'rgba(0,0,123,1)' ) を取得できる",
                uu.color('#00007b').rgba, "==", 'rgba(0,0,123,1)');
        uu.ok("uu.color('#00007b').hsla() で HSLAHash( {h:240,s:100,l:24,a:1} ) を取得できる",
                uu.color('#00007b').hsla(), "has", {h:240,s:100,l:24,a:1});
        uu.ok("uu.color('tomato').gray().hex で #636363 を取得できる",
                uu.color('tomato').gray().hex, "==", "#636363");
        uu.ok("uu.color('tomato').sepia().hex で #ab8e71 を取得できる",
                uu.color('tomato').sepia().hex, "==", "#ab8e71");
        uu.ok("uu.color('tomato').comple().hex で #009cb8 を取得できる",
                uu.color('tomato').comple().hex, "==", "#009cb8");
        uu.ok("uu.color('tomato').arrange(100, 10, 10).hex で #92ff7a を取得できる",
                uu.color('tomato').arrange(100, 10, 10).hex, "==", "#92ff7a");
        uu.ok("uu.color('tomato') は Color を返す",
                uu.color('tomato'), "is Color");
        uu.ok("uu.color(uu.color('tomato')) と uu.color('tomato') は同じ結果になる",
                uu.color(uu.color('tomato')), "==", uu.color('tomato'));
        uu.ok("uu.color('tomato').hsla() は HSLAHash を返す",
                uu.color('tomato').hsla(), "is HSLAHash");
        uu.ok("uu.color(Color) は Color を返す",
                uu.color('tomato'), "is Color");
        uu.ok("uu.color(HSLAHash) は ColorHash を返す",
                uu.color(uu.color('tomato').hsla()), "is Color");
        uu.ok("uu.color(RGBAHash) は Color を返す",
                uu.color({r:0,g:0,b:0,a:0}), "is Color");
        uu.ok("uu.color(W3CNamedColor) は Color を返す",
                uu.color('skyblue'), "is Color");
        uu.ok("uu.color('#000') は Color を返す",
                uu.color('#000'), "is Color");
        uu.ok("uu.color('#000000') は Color を返す",
                uu.color('#000000'), "is Color");
        uu.ok("uu.color('rgba(0,0,0,0)') は Color を返す",
                uu.color('rgba(0,0,0,0)'), "is Color");
        uu.ok("uu.color('rgba( 100%, 100%, 100%, 0.5 )') は Color を返す",
                uu.color('rgba( 100%, 100%, 100%, 0.5 )'), "is Color");
        uu.ok("uu.color('hsla( 360, 100%, 100%, 0.5 )') は Color を返す",
                uu.color('hsla( 360, 100%, 100%, 0.5 )'), "is Color");
    })();


    uu.ok("uu.entity()");
    uu.ok("uu.entity('<a href=\"&\">') == '&lt;a href=&quot;&amp;&quot;&gt;'",
                uu.entity('<a href="&">'), "==", '&lt;a href=&quot;&amp;&quot;&gt;');

    uu.ok("uu.entity.decode()");

    uu.ok("uu.entity.decode('&lt;a href=&quot;&amp;&quot;&gt;&lt;/a&gt;') == '<a href=\"&\"></a>'",
                uu.entity.decode('&lt;a href=&quot;&amp;&quot;&gt;&lt;/a&gt;'), "==", '<a href="&"></a>');

    uu.ok("uu.entity.decode('\\u0073\\u0074\\u0072\\u0069\\u006e\\u0067', 0) == 'string'",
                uu.entity.decode('\\u0073\\u0074\\u0072\\u0069\\u006e\\u0067', 0), "==", 'string');
    uu.ok("uu.entity.decode('st\\u0073\\u0074\\u0072\\u0069\\u006e\\u0067', 0) == 'ststring'",
                uu.entity.decode('st\\u0073\\u0074\\u0072\\u0069\\u006e\\u0067', 0), "==", 'ststring');
    uu.ok("uu.entity.decode('\\u3043\\u3044\\u3045', 0) == 'ぃいぅ'",
                uu.entity.decode('\\u3043\\u3044\\u3045', 0), "==", 'ぃいぅ');
    uu.ok("uu.entity.decode('&amp;\\u3043\\u3044\\u3045&amp;', 0) == '&ぃいぅ&'",
                uu.entity.decode('&amp;\\u3043\\u3044\\u3045&amp;', 0), "==", '&ぃいぅ&');

    uu.ok("uu.number");
    (function() {
        uu.ok("uu.number", uu.number(), "is number");
        uu.ok('uu.number.expand(10, 10), "==", 10', uu.number.expand(10, 10), "==", 10);
        uu.ok('uu.number.expand(10, "+10"), "==",  20', uu.number.expand(10, "+10"), "==",  20);
        uu.ok('uu.number.expand(10, "-10"), "==",   0', uu.number.expand(10, "-10"), "==",   0);
        uu.ok('uu.number.expand(10, "*10"), "==", 100', uu.number.expand(10, "*10"), "==", 100);
        uu.ok('uu.number.expand(10, "/10"), "==",   1', uu.number.expand(10, "/10"), "==",   1);
        uu.ok('uu.number.expand(0, 10.1, parseInt), "==", 10', uu.number.expand(0, 10.1, parseInt), "==", 10);
        uu.ok('uu.number.expand(0, 10.1, parseFloat), "==", 10.1', uu.number.expand(0, 10.1, parseFloat), "==", 10.1);
    })();

    uu.ok("uu.array.unique");
    (function() {
        var body = document.body,
            head = document.head;

        var ary = [1,2,,null,3,3,2,1,0];
        delete ary[1];

        uu.ok("[1][unique elements] uu.array.unique([<body>, <head>, <body>]) は [<body>, <head>]",
                uu.array.unique([body, head, body]), "==", [body, head]);

        uu.ok("[1][unique elements] uu.array.unique([0, 1, 2, 3, 3, 2, 1, 0]) は [0, 1, 2, 3]",
                uu.array.unique([0, 1, 2, 3, 3, 2, 1, 0]), "==", [0, 1, 2, 3]);

        uu.ok("[2][unique literals] uu.array.unique([0, 1, 2, 3, 3, 2, 1, 0], 1) は [0, 1, 2, 3]",
                uu.array.unique([0, 1, 2, 3, 3, 2, 1, 0], 1), "==", [0, 1, 2, 3]);

        uu.ok("uu.array.unique(var ary=[1,2,,null,3,3,2,1,0]; delete ary[1]) は [1, 3, 2, 0]。\nuu.array.unique は 欠落(delete)した要素や null をスキップする",
                uu.array.unique(ary), "==", [1, 3, 2, 0]);
    })();

    uu.ok("uu.base64");
    (function() {
        var short = "a!1=2/3*4~";
        var long = "カルビx3, ハラミx2, ブタバラ, T-BORNx500g, ライス大盛りで";

        uu.ok("Base64 encode");
        uu.ok("uu.base64(short) - base64",  uu.base64(short),   "is string");
        uu.ok("uu.base64(long) - base64",   uu.base64(long),    "is string");
        uu.ok("uu.base64('') - base64",     uu.base64(''),      "==", "");
        uu.ok("uu.base64('a')",             uu.base64("a"),     "==", "YQ==");
        uu.ok("uu.base64('ab')",            uu.base64("ab"),    "==", "YWI=");
        uu.ok("uu.base64('abc')",           uu.base64("abc"),   "==", "YWJj");

        uu.ok("URLSafe64 encode");
        uu.ok("uu.base64(short, true)",     uu.base64(short, true), "is string");
        uu.ok("uu.base64(long, true)",      uu.base64(long, true),  "is string");
        uu.ok("uu.base64('', true)",        uu.base64('', true),    "is string");

        uu.ok("Base64 decode")
        uu.ok("uu.base64.decode(short)",    uu.base64.decode(uu.base64(short)), "==", short);
        uu.ok("uu.base64.decode(long)",     uu.base64.decode(uu.base64(long)), "==", long);
        uu.ok("uu.base64.decode('')",       uu.base64.decode(uu.base64('')), "==", '');
        uu.ok("uu.base64.decode('a')",      uu.base64.decode(uu.base64("a")), "==", "a");
        uu.ok("uu.base64.decode('ab')",     uu.base64.decode(uu.base64("ab")), "==", "ab");
        uu.ok("uu.base64.decode('abc')",    uu.base64.decode(uu.base64("abc")), "==", "abc");

        uu.ok("URLSafe64 decode");
        uu.ok("uu.base64.decode(short, true)",  uu.base64.decode(uu.base64(short, true)), "==", short);
        uu.ok("uu.base64.decode(long, true)",   uu.base64.decode(uu.base64(long, true)), "==", long);
        uu.ok("uu.base64.decode('', true)",     uu.base64.decode(uu.base64('', true)), "==", '');
    })();

    uu.ok("MD5");
    (function() {
        var longData = "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"
                     + "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111";

        uu.ok('uu.md5("hoge")',
            uu.md5("hoge"), "==", "ea703e7aa1efda0064eaa507d9e8ab7e");
        uu.ok('uu.md5("ascii")',
            uu.md5("ascii"), "==", "5b7f33be48f19c25e1af2f96cffc569f");
        uu.ok('uu.md5("user-password")',
            uu.md5("user-password"), "==", "9a3729201fdd376c76ded01f986481b1");
        uu.ok('uu.md5(longData)',
            uu.md5(longData), "==", "3eb5de4c3f5768c373d2fde0df1dff7e");
        uu.ok('uu.md5(uu.utf8("こんにちはこんにちは"))',
            uu.md5(uu.utf8("こんにちはこんにちは")), "==", "6870d8dd4b4bc38db9b094f1a959eae2");
    })();

    uu.ok("SHA1");
    (function() {
        var longData = "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"
                     + "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111";

        uu.ok('uu.sha1("hoge")',
            uu.sha1("hoge"), "==", "31f30ddbcb1bf8446576f0e64aa4c88a9f055e3c");
        uu.ok('uu.sha1("ascii")',
            uu.sha1("ascii"), "==", "51c066b36ea8b32076964c766f8a0324ca4eb4b9");
        uu.ok('uu.sha1("user-password")',
            uu.sha1("user-password"), "==", "691ca1151748ae7b52b1c82eaaacc60f8d41db82");
        uu.ok('uu.sha1(longData)',
            uu.sha1(longData), "==", "741f8afc3ebbb102642006a632d571651f87d40c");
        uu.ok('uu.sha1(uu.utf8("こんにちはこんにちは"))',
            uu.sha1(uu.utf8("こんにちはこんにちは")), "==", "86f21e69d24fa04f2dc2926a08d183eee9afae2c");
    })();

    uu.ok("uu.url");
    (function() {
        var url, hash, result, ary;

        uu.ok("get absolute directory");


        url = uu.url();
        uu.ok("uu.url() - current abs-dir", url, "is string");

        hash = uu.url(uu.url());
        uu.ok("uu.url(uu.url()) to URLHash", hash, "is hash");

        uu.ok("parse url");




        url = "http://example.com:8080/dir/file.ext?qs=string;more=value#fragment";
        result = {
            url:        "http://example.com:8080/dir/file.ext?qs=string;more=value#fragment",
            scheme:     "http",
            domain:     "example.com",
            port:       "8080",
            base:       "http://example.com:8080/dir/",
            path:       "/dir/file.ext",
            dir:        "/dir/",
            file:       "file.ext",
            qs:         "qs=string;more=value",
            hash:       { qs: "string", more: "value" },
            fragment:   "fragment"
        };
        hash = uu.url(url);
        uu.ok("uu.url('http://example.com:8080/dir/file.ext?qs=string;more=value#fragment') - parse url",
                hash, "==", result);

        uu.ok("build url");



        result = "http://example.com:8080/dir/file.ext?qs=string;more=value#fragment";
        hash = {
            url:        "http://example.com:8080/dir/file.ext?qs=string;more=value#fragment",
            scheme:     "http",
            domain:     "example.com",
            port:       "8080",
            base:       "http://example.com:8080/dir/",
            path:       "/dir/file.ext",
            dir:        "/dir/",
            file:       "file.ext",
            qs:      "qs=string;more=value",
            hash:       { qs: "string", more: "value" },
            fragment:   "fragment"
        };
        url = uu.url(hash);
        uu.ok("uu.url(URLHash) -> build url",
                url, "==", result);


        uu.ok("rebuild url(parse + build)");


        url = "http://example.com:8080/dir/file.ext?qs=string;more=value#fragment";
        uu.ok("uu.url(uu.url('http://example.com:8080/dir/file.ext?qs=string;more=value#fragment'))",
                uu.url(uu.url(url)), "==", url);

        uu.ok("get absolute path");
        uu.ok("uu.url.abs('../dir/file.ext') は 相対URL を絶対URLに変換する",
                uu.url.abs('../dir/file.ext'), "!=", "../dir/file.ext");
        uu.ok("uu.url.abs('http://example.com/dir/file.ext') は 絶対URL なのでそのまま",
                uu.url.abs('http://example.com/dir/file.ext'), "==", 'http://example.com/dir/file.ext');


        uu.ok("get directory");

        hash = uu.url.dir("http://example.com/dir/file.ext");
        uu.ok("uu.url.dir('http://example.com/dir/file.ext') -> 'http://example.com/dir/'",
                hash, "==", "http://example.com/dir/");


        hash = uu.url.dir('/root/dir/file.ext');
        uu.ok("uu.url.dir('/root/dir/file.ext') -> '/root/dir/'",
                hash, "==", '/root/dir/');


        hash = uu.url.dir('/file.ext');
        uu.ok("uu.url.dir('/file.ext') -> '/'",
                hash, "==", '/');

        hash = uu.url.dir('/');
        uu.ok("uu.url.dir('/') -> '/'",
                hash, "==", '/');


        hash = uu.url.dir('');
        uu.ok("uu.url.dir('') -> '/'",
                hash, "==", '/');


        uu.ok("split directory, file");

        ary = uu.url.split('http://example.com/dir/file.ext');
        uu.ok("uu.url.split('http://example.com/dir/file.ext') -> ['http://example.com/dir/', 'file.ext']",
                ary, "==", ['http://example.com/dir/', 'file.ext']);


        uu.ok("uu.qs");

        result = uu.qs("key=val;key2=val2");
        uu.ok('uu.qs("key=val;key2=val2") -> { key: "val", key2: "val2" }',
                result, "==", { key: "val", key2: "val2" });


        result = uu.qs({ key: "val",     key2: "val2" });
        uu.ok('uu.qs({ key: "val",     key2: "val2" }) -> "key=val;key2=val2"',
                result, "==", "key=val;key2=val2");


        result = uu.qs( "key=val",     { key2: "val2" });
        uu.ok('uu.qs( "key=val",     { key2: "val2" }) -> "key=val;key2=val2"',
                result, "==", "key=val;key2=val2");


        result = uu.qs({ key: "val" }, { key2: "val2" });
        uu.ok('uu.qs({ key: "val" }, { key2: "val2" }) -> "key=val;key2=val2"',
                result, "==", "key=val;key2=val2");


        uu.ok("boundary");


        url = 'http://example.com:8080/dir/file.ext?key=val&key2=val2#fragment';
        uu.ok("uu.qs('http://example.com:8080/dir/file.ext?key=val&key2=val2#fragment') は URL から QueryString を取り出しパース可能",
                uu.qs(url), "==", { key: "val", key2: "val2" });


        uu.ok("uu.qs('key=val&key2=val2#frag') はパースに失敗する",
                uu.qs('key=val&key2=val2#frag'), "!=", { key: "val", key2: "val2" });
    })();

    uu.ok();
});
</script>
<div id="selectedTestGroupSize1">
    <select size="1">
        <option value="value1">text1</option>
        <option value="value2" selected="selected">text2</option>
        <option value="value3">text3</option>
    </select>

    <select size="1">
        <option value="value1">text1</option>
        <option value="value2">text2</option>
        <option value="value3">text3</option>
    </select>

    <select size="1">
        <option value="value1">text1</option>
        <option value="value2" selected="selected">text2</option>
        <option value="value3">text3</option>
    </select>

    <select size="1">
        <option value="value1">text1</option>
        <option value="value2">text2</option>
        <option value="value3">text3</option>
    </select>
</div>

<div id="selectedTestGroupSize3">
    <select size="3">
        <option value="value1">text1</option>
        <option value="value2" selected="selected">text2</option>
        <option value="value3">text3</option>
    </select>

    <select size="3">
        <option value="value1">text1</option>
        <option value="value2">text2</option>
        <option value="value3">text3</option>
    </select>

    <select size="3">
        <option value="value1">text1</option>
        <option value="value2" selected="selected">text2</option>
        <option value="value3">text3</option>
    </select>

    <select size="3">
        <option value="value1">text1</option>
        <option value="value2">text2</option>
        <option value="value3">text3</option>
    </select>
</div>
<script>
uu.ready("window", function() {
    uu.ok('<select size="1"> phase');

    var node;

    node = uu.query("#selectedTestGroupSize1>select:nth-child(1)");
    uu.ok('<select size="1"><option selected></select> + 実在する値(value3)を指定する -> "value3" が選択される',
        uu.value(uu.value(node[0], "value3")), "==", "value3");


    node = uu.query("#selectedTestGroupSize1>select:nth-child(2)");
    uu.ok('<select size="1"><option></select> + 実在する値(value3)を指定する -> "value3" が選択される',
        uu.value(uu.value(node[0], "value3")), "==", "value3");


    node = uu.query("#selectedTestGroupSize1>select:nth-child(3)");
    uu.ok('<select size="1"><option selected></select> + 実在しない値(hoge)を指定する -> 初期選択状態になり、上から二番目(value2)が選択される',
        uu.value(uu.value(node[0], "hoge")), "==", "value2");


    node = uu.query("#selectedTestGroupSize1>select:nth-child(4)");
    uu.ok('<select size="1"><option></select> + 実在しない値(hoge)を指定する -> 初期選択状態になり一番上が選択される',
        uu.value(uu.value(node[0], "hoge")), "==", "value1");

    uu.ok('<select size="3"> phase');

    node = uu.query("#selectedTestGroupSize3>select:nth-child(1)");
    uu.ok('<select size="3"><option selected></select> + 実在する値(value3)を指定する -> "value3" が選択される',
        uu.value(uu.value(node[0], "value3")), "==", "value3");


    node = uu.query("#selectedTestGroupSize3>select:nth-child(2)");
    uu.ok('<select size="3"><option></select> + 実在する値(value3)を指定する -> "value3" が選択される',
        uu.value(uu.value(node[0], "value3")), "==", "value3");


    node = uu.query("#selectedTestGroupSize3>select:nth-child(3)");
    uu.ok('<select size="3"><option selected></select> + 実在しない値(hoge)を指定する -> 初期選択状態になり、上から二番目(value2)が選択される',
        uu.value(uu.value(node[0], "hoge")), "==", "value2");


    node = uu.query("#selectedTestGroupSize3>select:nth-child(4)");
    uu.ok('<select size="3"><option></select> + 実在しない値(hoge)を指定する -> 未選択状態になる',
        uu.value(uu.value(node[0], "hoge")), "==", "");

    uu.ok();
});
</script>
<div id="multipleSelectedTestGroupSize1">
    <select multiple="multiple" size="1">
        <option value="value1">text1</option>
        <option value="value2" selected="selected">text2</option>
        <option value="value3" selected="selected">text3</option>
        <option value="value4">text4</option>
    </select>

    <select multiple="multiple" size="1">
        <option value="value1">text1</option>
        <option value="value2">text2</option>
        <option value="value3">text3</option>
        <option value="value4">text4</option>
    </select>

    <select multiple="multiple" size="1">
        <option value="value1">text1</option>
        <option value="value2" selected="selected">text2</option>
        <option value="value3" selected="selected">text3</option>
        <option value="value4">text4</option>
    </select>

    <select multiple="multiple" size="1">
        <option value="value1">text1</option>
        <option value="value2">text2</option>
        <option value="value3">text3</option>
        <option value="value4">text4</option>
    </select>
</div>

<div id="multipleSelectedTestGroupSize3">
    <select multiple="multiple" size="4">
        <option value="value1">text1</option>
        <option value="value2" selected="selected">text2</option>
        <option value="value3" selected="selected">text3</option>
        <option value="value4">text4</option>
    </select>

    <select multiple="multiple" size="4">
        <option value="value1">text1</option>
        <option value="value2">text2</option>
        <option value="value3">text3</option>
        <option value="value4">text4</option>
    </select>

    <select multiple="multiple" size="4">
        <option value="value1">text1</option>
        <option value="value2" selected="selected">text2</option>
        <option value="value3" selected="selected">text3</option>
        <option value="value4">text4</option>
    </select>

    <select multiple="multiple" size="4">
        <option value="value1">text1</option>
        <option value="value2">text2</option>
        <option value="value3">text3</option>
        <option value="value4">text4</option>
    </select>
</div>
<script>
uu.ready("window", function(uu) {
    uu.ok('<select multiple size="1"> phase');

    var node;


    node = uu.query("#multipleSelectedTestGroupSize1>select:nth-child(1)");
    uu.ok('<select multiple size="1"><option selected></select> + 実在する値(value3)を指定する -> ["value3"] が選択される',
        uu.value(uu.value(node[0], "value3")), "==", ["value3"]);


    node = uu.query("#multipleSelectedTestGroupSize1>select:nth-child(2)");
    uu.ok('<select multiple size="1"><option></select> + 実在する値(value3)を指定する -> ["value3"] が選択される',
        uu.value(uu.value(node[0], "value3")), "==", ["value3"]);


    node = uu.query("#multipleSelectedTestGroupSize1>select:nth-child(3)");
    uu.ok('<select multiple size="1"><option selected></select> + 実在しない値(hoge)を指定する -> 未選択状態になる',
          uu.value(uu.value(node[0], "hoge")), "==", []);


    node = uu.query("#multipleSelectedTestGroupSize1>select:nth-child(4)");
    uu.ok('<select multiple size="1"><option></select> + 実在しない値(hoge)を指定する -> 未選択状態になる',
          uu.value(uu.value(node[0], "hoge")), "==", []);


    uu.ok('<select multiple size="4"> phase');

    node = uu.query("#multipleSelectedTestGroupSize3>select:nth-child(1)");
    uu.ok('<select multiple size="4"><option selected></select> + 実在する値(value3)を指定する -> ["value3"] が選択される',
        uu.value(uu.value(node[0], "value3")), "==", ["value3"]);


    node = uu.query("#multipleSelectedTestGroupSize3>select:nth-child(2)");
    uu.ok('<select multiple size="4"><option></select> + 実在する値(value3)を指定する -> ["value3"] が選択される',
        uu.value(uu.value(node[0], "value3")), "==", ["value3"]);


    node = uu.query("#multipleSelectedTestGroupSize3>select:nth-child(3)");
    uu.ok('<select multiple size="4"><option selected></select> + 実在しない値(hoge)を指定する -> 未選択状態になる',
        uu.value(uu.value(node[0], "hoge")), "==", []);


    node = uu.query("#multipleSelectedTestGroupSize3>select:nth-child(4)");
    uu.ok('<select multiple size="4"><option></select> + 実在しない値(hoge)を指定する -> 未選択状態になる',
        uu.value(uu.value(node[0], "hoge")), "==", []);
});
</script>
<script>
uu.ready("window", function() {

    uu.ok("Native JSON.stringify + JSON.parse");
    uu.ok("uu.json({a:1})",         uu.json({a:1}), "==", '{"a":1}');
    uu.ok("uu.json(null)",          uu.json(null), "==", 'null');
    uu.ok("uu.json(undefined)",     uu.json(undefined), "==", '');
    uu.ok("uu.json(true)",          uu.json(true), "==", 'true');
    uu.ok("uu.json(false)",         uu.json(false), "==", 'false');
    uu.ok("uu.json(123.45)",        uu.json(123.45), "==", '123.45');
    uu.ok("uu.json(new Date)",      uu.json(new Date), "is string");
    uu.ok("uu.json('string')",      uu.json('string'), "==", '"string"');
    uu.ok("uu.json([1,2])",         uu.json([1,2]), "==", '[1,2]');
    uu.ok("uu.json(NaN)",           uu.json(NaN), "is string");
    uu.ok("uu.json(Infinity)",      uu.json(Infinity), "is string");

    uu.ok("Alternative uu.json(mix, true),  uu.json.decode(jsonString, true)");
    uu.ok("uu.json(new Date, true)",        uu.json(new Date, true), "is string");
    uu.ok("uu.json({a:1}, true)",           uu.json({a:1}, true), "==", '{"a":1}');
    uu.ok("uu.json(document.body, true)",   uu.json(document.body, true), "==", '"body"');
    uu.ok("uu.json(null, true)",            uu.json(null, true), "==", 'null');
    uu.ok("uu.json(undefined, true)",       uu.json(undefined, true), "==", '');
    uu.ok("uu.json(true, true)",            uu.json(true, true), "==", 'true');
    uu.ok("uu.json(false, true)",           uu.json(false, true), "==", 'false');
    uu.ok("uu.json(123.45, true)",          uu.json(123.45, true), "==", '123.45');
    uu.ok("uu.json(new Date, true)",        uu.json(new Date, true), "is string");
    uu.ok("uu.json(uu.nop, true)",          uu.json(uu.nop, true), "is string");
    uu.ok("uu.json('string', true)",        uu.json('string', true), "==", '"string"');
    uu.ok("uu.json([1,2], true)",           uu.json([1,2], true), "==", '[1,2]');
    uu.ok("uu.json(document.links, true)",  uu.json(document.links, true), "is string");

    var cs = window.getComputedStyle ? window.getComputedStyle(document.body, null)
                                     : document.body.currentStyle;
    uu.ok("uu.json(window.getComputedStyle(document.body, null), true)",
                                            uu.json(cs, true), "is string");
    uu.ok("uu.json(NaN, true)",             uu.json(NaN, true), "is string");
    uu.ok("uu.json(Infinity, true)",        uu.json(Infinity, true), "is string");

    if (!window.JSON) {
        return;
    }
    uu.ok("Compare");

    var data = '"', rhs = '"\""';
    var jstr = uu.json(data);
    var nstr = JSON.stringify(data);

    var lhs = uu.json.decode(jstr);

    uu.ok('uu.json.decode(uu.json(\'"\')) == \'"\'', [lhs, jstr], "==", [data, jstr]);

    var data = "\b", rhs = '"\\b"';
    var jstr = uu.json(data);
    var lhs = uu.json.decode(jstr);

    uu.ok('uu.json.decode(uu.json("\\b")) == "\\b"', [lhs, jstr], "==", [data, jstr]);

                var data = "\f", rhs = '"\\f"';
                var jstr = uu.json(data);
                var lhs = uu.json.decode(jstr);

    uu.ok('uu.json.decode(uu.json("\\f")) == "\\f"', [lhs, jstr], "==", [data, jstr]);

                var data = "\n", rhs = '"\\n"';
                var jstr = uu.json(data);
                var lhs = uu.json.decode(jstr);

    uu.ok('uu.json.decode(uu.json("\\n")) == "\\n"', [lhs, jstr], "==", [data, jstr]);

                var data = "\r", rhs = '"\\r"';
                var jstr = uu.json(data);
                var lhs = uu.json.decode(jstr);

    uu.ok('uu.json.decode(uu.json("\\r")) == "\\r"', [lhs, jstr], "==", [data, jstr]);

                var data = "\t", rhs = '"\\t"';
                var jstr = uu.json(data);
                var lhs = uu.json.decode(jstr);

    uu.ok('uu.json.decode(uu.json("\\t")) == "\\t"', [lhs, jstr], "==", [data, jstr]);

                var data = "\\", rhs = '"\\\\"';
                var jstr = uu.json(data);
                var lhs = uu.json.decode(jstr);

    uu.ok('uu.json.decode(uu.json("\\")) == "\\"', [lhs, jstr], "==", [data, jstr]);

    uu.ok("JSON.stringify");

                var data = new Date;

    uu.ok("Date.toISOString() == Date.toJSON",  data.toISOString(), "==", data.toJSON());
    uu.ok("(true).toJSON()",                    (true).toJSON(), "==", true);
    uu.ok("(false).toJSON()",                   (false).toJSON(), "==", false);
    uu.ok("(NaN).toJSON()",                     (NaN).toJSON(), "is NaN");
    uu.ok("(Infinity).toJSON()",                (Infinity).toJSON(), "is Infinity");
    uu.ok("(0).toJSON()",                       (0).toJSON(), "==", 0);
    uu.ok("(-0).toJSON()",                      (-0).toJSON(), "==", 0);
    uu.ok("(-12.3).toJSON()",                   (-12.3).toJSON(), "==", -12.3);
    uu.ok("('string').toJSON()",                ('string').toJSON(), "==", 'string');
    uu.ok("('あa').toJSON()",                   ('あa').toJSON(), "==", 'あa');



                var data = '"', rhs = '"\""';
                var jstr = JSON.stringify(data);
                var lhs = JSON.parse(jstr);

    uu.ok('JSON.parse(JSON.stringify(\'"\')) == \'"\'',  [lhs, jstr], "==", [data, jstr]);

                var data = "\b", rhs = '"\\b"';
                var jstr = JSON.stringify(data);
                var lhs = JSON.parse(jstr);

    uu.ok('JSON.parse(JSON.stringify("\\b")) == "\\b"', [lhs, jstr], "==", [data, jstr]);

                var data = "\f", rhs = '"\\f"';
                var jstr = JSON.stringify(data);
                var lhs = JSON.parse(jstr);

    uu.ok('JSON.parse(JSON.stringify("\\f")) == "\\f"', [lhs, jstr], "==", [data, jstr]);

                var data = "\n", rhs = '"\\n"';
                var jstr = JSON.stringify(data);
                var lhs = JSON.parse(jstr);

    uu.ok('JSON.parse(JSON.stringify("\\n")) == "\\n"', [lhs, jstr], "==", [data, jstr]);

                var data = "\r", rhs = '"\\r"';
                var jstr = JSON.stringify(data);
                var lhs = JSON.parse(jstr);

    uu.ok('JSON.parse(JSON.stringify("\\r")) == "\\r"', [lhs, jstr], "==", [data, jstr]);

                var data = "\t", rhs = '"\\t"';
                var jstr = JSON.stringify(data);
                var lhs = JSON.parse(jstr);

    uu.ok('JSON.parse(JSON.stringify("\\t")) == "\\t"', [lhs, jstr], "==", [data, jstr]);

                var data = "\\", rhs = '"\\\\"';
                var jstr = JSON.stringify(data);
                var lhs = JSON.parse(jstr);

    uu.ok('JSON.parse(JSON.stringify("\\\\")) == "\\\\"', [lhs, jstr], "==", [data, jstr]);

    uu.ok();
});
</script>
<script>
uu.ready("window", function() {
    var div;

    uu.body(div = uu.div("", "x,0,y,0,position:absolute", "hello junction"));



    var junc0 = uu.junction(5, 5, function(values, ok) {
        uu.ok("Junction");
        uu.ok("uu.junction", true, "==", ok);
        uu.ok();
    });

    var junc1 = uu.junction(1, 1, function(values, ok) { ok ? junc0.ok("1 ok") : junc0.ng("1 ng"); });
    var junc2 = uu.junction(1, 2, function(values, ok) { ok ? junc0.ok("2 ok") : junc0.ng("2 ng"); });
    var junc3 = uu.junction(1, 3, function(values, ok) { ok ? junc0.ok("3 ok") : junc0.ng("3 ng"); });
    var junc4 = uu.junction(2, 3, function(values, ok) { ok ? junc0.ok("4 ok") : junc0.ng("4 ng"); });
    var junc5 = uu.junction(3, 3, function(values, ok) { ok ? junc0.ok("5 ok") : junc0.ng("5 ng"); });

    uu.fx(div, 1000, { bgc: "lime",     junction: junc1 });
    uu.fx(div, 1000, { c:   "yellow",   junction: junc2 });
    uu.fx(div, 1000, { o:   0.5,        junction: junc3 });
    uu.fx(div, 1000, { w:   100,        junction: junc4 });
    uu.fx(div, 1000, { h:   200,        junction: junc4 });
    uu.fx(div, 1000, { x:   300,        junction: junc5 });
    uu.fx(div, 1000, { y:   400,        junction: junc5 });
    uu.fx(div, 1000, { c:   "white",    junction: junc5 });


    var juncNG = uu.junction(1, 5, function(values, ok) {
        uu.ok("Junction NG pattern");
        uu.ok("uu.junction", false, "==", ok);
        uu.ok();
    });

    var junc11 = uu.junction(1, 1, function(values, ok) { juncNG.ng("1 ng"); });
    var junc12 = uu.junction(1, 2, function(values, ok) { juncNG.ng("2 ng"); });
    var junc13 = uu.junction(1, 3, function(values, ok) { juncNG.ng("3 ng"); });
    var junc14 = uu.junction(2, 3, function(values, ok) { juncNG.ng("4 ng"); });
    var junc15 = uu.junction(3, 3, function(values, ok) { juncNG.ng("5 ng"); });

    uu.fx(div, 10, { bgc: "lime",     junction: junc11 });
    uu.fx(div, 10, { c:   "yellow",   junction: junc12 });
    uu.fx(div, 10, { o:   0.5,        junction: junc13 });
    uu.fx(div, 10, { w:   100,        junction: junc14 });
    uu.fx(div, 10, { h:   200,        junction: junc14 });
    uu.fx(div, 10, { x:   300,        junction: junc15 });
    uu.fx(div, 10, { y:   400,        junction: junc15 });
    uu.fx(div, 10, { c:   "white",    junction: junc15 });

});
</script>


</body></html>
